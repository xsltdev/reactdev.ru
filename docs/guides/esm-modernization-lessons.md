---
description: –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ–º –æ–ø—ã—Ç–µ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–ª—É—á–∏–ª, –ø–µ—Ä–µ–Ω–æ—Å—è –ø–∞–∫–µ—Ç—ã Redux –Ω–∞ ESM
---

# –û–ø—ã—Ç –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤ ESM

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ–º –æ–ø—ã—Ç–µ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–ª—É—á–∏–ª, –ø–µ—Ä–µ–Ω–æ—Å—è –ø–∞–∫–µ—Ç—ã Redux –Ω–∞ ESM.

## –í–≤–µ–¥–µ–Ω–∏–µ

–í —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 8 —Å –ª–∏—à–Ω–∏–º –ª–µ—Ç —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ JS –º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é ES-–º–æ–¥—É–ª–µ–π ("ESM") –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é JS-–∫–æ–¥–∞. –ü–æ–¥–æ–±–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥—É Python 2-->3, —ç—Ç–æ –±—ã–ª–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Å–ª–æ–∂–Ω–æ –∏ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω–æ.

–ö–∞–∫ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–π –ø–∞–∫–µ—Ç–æ–≤, —è —Ö–æ—á—É –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –º–æ–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –∏ –ø—Ä–∏–≥–æ–¥–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–∞–º–æ–º —à–∏—Ä–æ–∫–æ–º —Å–ø–µ–∫—Ç—Ä–µ —Å—Ä–µ–¥, –∫–æ—Ç–æ—Ä—ã–µ —è –º–æ–≥—É –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ —Ç–∞–∫–∂–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω—é–∞–Ω—Å–∞–º–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ –∏ —Å—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–í –Ω–∞—á–∞–ª–µ —ç—Ç–æ–≥–æ –≥–æ–¥–∞ —è –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –ø–æ–ø—ã—Ç–∫–æ–π –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫ —Å–µ–º–µ–π—Å—Ç–≤–∞ [Redux](../libs/redux/index.md), —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–º "–ø–æ–ª–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ESM". –ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –ø—Ä–∏–¥—É–º–∞–ª –Ω–∞–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ, –ø–æ—Ö–æ–∂–µ, —Ä–∞–±–æ—Ç–∞—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ —ç—Ç–æ –±—ã–ª–æ –Ω–µ–ø—Ä–æ—Å—Ç–æ.

–û–¥–Ω–æ –∏–∑ –º–æ–∏—Ö —Å–∞–º—ã—Ö –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–π - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –µ–¥–∏–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–≥–æ –∏ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å JS-–ø–∞–∫–µ—Ç". –Ø –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ —É–º–æ–ª—è–ª –∫–∞–∫–æ–≥–æ-–Ω–∏–±—É–¥—å —ç–∫—Å–ø–µ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞–µ—Ç, –Ω–∞–ø–∏—Å–∞—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–∞–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ. –í –∏–¥–µ–∞–ª–µ –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –æ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ ESM/CJS –∏ `package.exports`, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ—Ä—Å–∏—è–º–∏ —Ç–∏–ø–æ–≤ TS, –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —à–µ–π–ø–∏–Ω–≥ –¥–µ—Ä–µ–≤–∞, –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ —á—Ç–æ –æ–Ω–∏ –∏—â—É—Ç, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –ú–Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ (—Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —è –ø—Ä–∏–≤–µ–¥—É –Ω–∏–∂–µ), –Ω–æ –Ω–∏—á–µ–≥–æ, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –±—ã –∂–µ–ª–∞–µ–º–æ–π —à–∏—Ä–æ—Ç–µ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é.

**–≠—Ç–æ—Ç –ø–æ—Å—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ç–∞–∫–∏–º "–∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º".** –≠—Ç–æ –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ —è –ø—Ä–æ–±–æ–≤–∞–ª, –∏ —Ç–µ—Ö —É—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è –∏–∑–≤–ª–µ–∫ –Ω–∞ —ç—Ç–æ–º –ø—É—Ç–∏. –°—É–¥—è –ø–æ —Ç–æ–º—É, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ª—é–¥–∏ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ –∏ –≥–æ–≤–æ—Ä–∏–ª–∏: "–¢—ã –¥–µ–ª–∞–µ—à—å —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ", —è —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —è –µ—â–µ –º–Ω–æ–≥–æ —á–µ–≥–æ –Ω–µ –ø–æ–Ω—è–ª. –ù–æ —è –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ–π –∏ –ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω–æ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–π –∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç–∞—Ç–µ–π, –æ–ø–∏—Å—ã–≤–∞—é—â–∏—Ö –∏—Å—Ç–æ—Ä–∏—é —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ESM, –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–ª–∏ –∫ –Ω—ã–Ω–µ—à–Ω–µ–π –ø—É—Ç–∞–Ω–∏—Ü–µ –∏ –ø—Ä–æ–±–ª–µ–º–∞–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –∏ –∫–∞–∫ –º—ã –ø–æ–ø–∞–ª–∏ –≤ —ç—Ç—É –Ω–µ—Ä–∞–∑–±–µ—Ä–∏—Ö—É. –í —Ü–µ–ª—è—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–º–∞ —Å—Ç–∞—Ç—å–∏ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –Ω–∞–π—Ç–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –∏ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –∏—Ö –≤ –∫–æ–Ω—Ü–µ, –∞ —Å–∞–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—É—Å—å –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –æ–ø—ã—Ç–µ –∏ —à–∞–≥–∞—Ö, –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—ã—Ö –≤ —Ö–æ–¥–µ —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

## –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ –ø–∞–∫–µ—Ç–æ–≤ Redux

### –ü–∞–∫–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í –∫–æ–Ω—Ü–µ 2022 –≥–æ–¥–∞ —è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –∏ –ø—É–±–ª–∏–∫–æ–≤–∞–ª —ç—Ç–∏ –ø–∞–∫–µ—Ç—ã –∫–∞–∫ —á–∞—Å—Ç—å Redux org:

-   `redux@4.2.x`
-   `react-redux@8.0.x`
-   `redux-thunk@2.4.x`
-   `reselect@4.1.x`
-   `@reduxjs/toolkit@1.9.x`

–ö–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏–º–µ–µ—Ç —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≤–∏—Ç–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫—É —É–ø–∞–∫–æ–≤–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–±–æ—Ä–∫–∏. –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ:

-   –í—Å–µ –ø–∞–∫–µ—Ç—ã –≤–∫–ª—é—á–∞–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ ESM, CJS –∏ UMD (—Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π `process.env.NODE_ENV`, –ª–∏–±–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ `"development"` –∏–ª–∏ `"production"` –≤–µ—Ä—Å–∏–π).
-   –í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.js`.
-   –í—Å–µ –ø–∞–∫–µ—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–∏–ª–∏—Å—å –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ES5 –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å IE11
-   `redux`, `react-redux`, `redux-thunk` –∏ `reselect` —Ç—Ä–∞–Ω—Å–ø–∏–ª–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å –ø–æ–º–æ—â—å—é Babel –∏ –ø–æ—Å—Ç–∞–≤–ª—è–ª–∏—Å—å –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ —Å Rollup. RTK –±—ã–ª —Å–æ–±—Ä–∞–Ω —Å –ø–æ–º–æ—â—å—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞-–æ–±–µ—Ä—Ç–∫–∏ ESBuild, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–ª —É–ø–∞–∫–æ–≤–∫—É –∏ –ø–µ—Ä–≤–∏—á–Ω—É—é —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏—é, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª tsc –¥–ª—è –ø–æ–Ω–∏–∂–µ–Ω–∏—è ES2015 –∫–æ–¥–∞ –¥–æ ES5.
-   –í—Å–µ –ø–∞–∫–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø–æ–ª—è `"main"`, `"module"` –∏ `"types"` –≤ —Ñ–∞–π–ª–µ `package.json`. –ù–∏ –æ–¥–∏–Ω –∏–∑ –ø–∞–∫–µ—Ç–æ–≤ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `"exports"` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏.
-   –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–æ–≤, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º RTK, –≤—ã–≤–æ–¥—è—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–∞–ø–∫–∏ –ø–æ —Ç–∏–ø—É: `dist` –¥–ª—è UMD, `lib` –¥–ª—è CJS, `es` –¥–ª—è ESM.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤ `package.json`:

```json
{
    "name": "redux",
    "version": "4.2.1",
    "main": "lib/redux.js",
    "unpkg": "dist/redux.js",
    "module": "es/redux.js",
    "typings": "./index.d.ts",
    "files": ["dist", "lib", "es", "src", "index.d.ts"]
}
```

---

```json
{
    "name": "react-redux",
    "version": "8.0.5",
    "main": "./lib/index.js",
    "types": "./es/index.d.ts",
    "unpkg": "dist/react-redux.js",
    "module": "es/index.js",
    "files": ["dist", "lib", "src", "es"]
}
```

---

```json
{
    "name": "@reduxjs/toolkit",
    "version": "1.9.5",
    "main": "dist/index.js",
    "module": "dist/redux-toolkit.esm.js",
    "unpkg": "dist/redux-toolkit.umd.min.js",
    "types": "dist/index.d.ts",
    "files": [
        "dist/**/*.js",
        "dist/**/*.js.map",
        "dist/**/*.d.ts",
        "dist/**/package.json",
        "src/",
        "query"
    ]
}
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ RTK –æ–∫–∞–∑–∞–ª–∞—Å—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∞ –∏–º–µ–µ—Ç 3 –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞: `@reduxjs/toolkit`, `@reduxjs/toolkit/query` –∏ `@reduxjs/toolkit/query/react`. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `package.json` RTK –Ω–µ –±—ã–ª–æ —É–∫–∞–∑–∞–Ω–æ –¥–≤—É—Ö —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞ RTKQ. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–º –ø–∞–∫–µ—Ç–µ –±—ã–ª–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–ø–∫–∞ `/query`, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —Ñ–∞–π–ª—ã `/query/package.json` –∏ `/query/react/package.json`, –∫–æ—Ç–æ—Ä—ã–µ, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —É–∫–∞–∑—ã–≤–∞–ª–∏ –Ω–∞ –Ω—É–∂–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ –ø–∞–ø–∫–µ dist. (–≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ã–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ "–∫–∞–∂–µ—Ç—Å—è, —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Webpack –∏ –µ—â–µ –ø–∞—Ä–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —è –¥—É–º–∞—é???").

–•–æ—Ç—è —ç—Ç–æ –∏ –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É –∏–∑–ª–æ–∂–µ–Ω–∏—é, —è —Ö–æ—Ç–µ–ª –±—ã –æ—Ç–º–µ—Ç–∏—Ç—å –¥–≤–∞ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ —è –∏—Å–ø–æ–ª—å–∑—É—é –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:

-   [release-it](https://github.com/release-it/release-it): –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏ –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ NPM, –≤–∫–ª—é—á–∞—è Git-—Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ
-   [yalc](https://www.npmjs.com/package/yalc): –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω—É—é –ª–æ–∫–∞–ª—å–Ω—É—é "–ø—É–±–ª–∏–∫–∞—Ü–∏—é" –ø–∞–∫–µ—Ç–∞, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —Å–∏–º–ª–∏–Ω–∫–∞–º–∏ (—Ç.–µ. `npm link`), –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

### –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º—ã

–í —Å–µ—Ä–µ–¥–∏–Ω–µ 2021 –≥–æ–¥–∞ –º—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ [RTK –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥](https://github.com/reduxjs/redux-toolkit/issues/1396). –í –Ω–∞—á–∞–ª–µ 2022 –≥–æ–¥–∞ –≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–µ —Å–æ–æ–±—â–∞–ª–æ—Å—å, —á—Ç–æ [RTK –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ ESM-—Ñ–∞–π–ª `.mjs`](https://github.com/reduxjs/redux-toolkit/issues/1960) –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–ª—è `"module"`, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–æ–ª—è `"exports"` –≤ `package.json`. –ù–∞–∫–æ–Ω–µ—Ü, –≤ –¥—Ä—É–≥–æ–º –≤–æ–ø—Ä–æ—Å–µ –±—ã–ª–æ –æ—Ç–º–µ—á–µ–Ω–æ, —á—Ç–æ [RTK –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π –æ–ø—Ü–∏–µ–π TypeScript `moduleResolution: "node16"`](https://github.com/reduxjs/redux-toolkit/issues/2485).

–Ø —É–∂–µ —Å–ø—Ä–∞—à–∏–≤–∞–ª –æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `"exports"` –≤ –ø–∞–∫–µ—Ç, –∏ –º–Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏, —á—Ç–æ "—ç—Ç–æ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ —Ä–∞–∑—Ä—É—à–∞—é—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ". –≠—Ç–æ –æ–∑–Ω–∞—á–∞–ª–æ, —á—Ç–æ —è –Ω–µ –º–æ–≥—É –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—é —ç—Ç–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫—Ä—É–ø–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –ø–∞–∫–µ—Ç–æ–≤. –ù–æ —è –Ω–µ –∏–º–µ–ª –Ω–∏ –º–∞–ª–µ–π—à–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ —Ç–æ–º, –∫–æ–≥–¥–∞ –º—ã —Å–º–æ–∂–µ–º –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –º–∞–∂–æ—Ä–Ω—ã–µ –≤–µ—Ä—Å–∏–∏. Redux 4.0 –≤—ã—à–µ–ª –≤ 2018 –≥–æ–¥—É, RTK 1.0 - –≤ –∫–æ–Ω—Ü–µ 2019 –≥–æ–¥–∞. React-Redux 8.0 –ø–æ—è–≤–∏–ª—Å—è —Å–æ–≤—Å–µ–º –Ω–µ–¥–∞–≤–Ω–æ, –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ 2022 –≥–æ–¥–∞.

–Ø–¥—Ä–æ Redux –±—ã–ª–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ TS –≤ 2019 –≥–æ–¥—É, –Ω–æ –º—ã —Ç–∞–∫ –∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –µ–≥–æ. –í–µ—Ä—Å–∏—è 4.x —Å –µ–µ —Ä—É–∫–æ–ø–∏—Å–Ω—ã–º–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è–º–∏ —Ä–∞–±–æ—Ç–∞–ª–∞, –∏ –º—ã –æ–ø–∞—Å–∞–ª–∏—Å—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –≤ —Å–≤—è–∑–∏ —Å –≤—ã–ø—É—Å–∫–æ–º –º–∞–∂–æ—Ä–∞ 5.0. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —É –Ω–∞—Å –±—ã–ª–æ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ RTK.

–í –Ω–æ—è–±—Ä–µ 2022 –≥–æ–¥–∞ –º—ã –≤—ã–ø—É—Å—Ç–∏–ª–∏ RTK 1.9. –ü–æ—Å–ª–µ –¥–≤—É—Ö–º–µ—Å—è—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä—ã–≤–∞ —è –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —Å–µ–ª –∑–∞ —Å—Ç–æ–ª –∏ –Ω–∞—á–∞–ª —Å–µ—Ä—å–µ–∑–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–µ–π –Ω–∞—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.

## –ü–µ—Ä–≤—ã–µ –ø–æ–ø—ã—Ç–∫–∏

–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç —è –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª —Å–ø–∏—Å–æ–∫ –≤–∫–ª–∞–¥–æ–∫ –∏ —Å—Ç–∞—Ç–µ–π, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã—Ö "–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ JS", ESM –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é ESM/CJS, –∑–Ω–∞—è, —á—Ç–æ —ç—Ç–æ—Ç –¥–µ–Ω—å —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –Ω–∞—Å—Ç—É–ø–∏—Ç. (–ù–∞ –º–æ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ –±—ã–ª–æ –æ–∫–æ–ª–æ 175 —Å—Ç–∞—Ç–µ–π!).

–Ø –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑ —ç—Ç–∏—Ö —Å—Ç–∞—Ç–µ–π, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–∏ –ø–µ—Ä–≤—ã–µ —à–∞–≥–∏. –ò–∑ –≤—Å–µ–≥–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ —è —Å–¥–µ–ª–∞–ª —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–≤–æ–¥—ã:

-   –ú–Ω–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `"type": "module"` –≤ —Ñ–∞–π–ª—ã `package.json`, —á—Ç–æ–±—ã Node –∏ –±–∞–Ω–¥–ª–µ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏, —á—Ç–æ –ø–∞–∫–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç ESM-—Ñ–∞–π–ª—ã.
-   –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á `"exports"` –≤ `package.json` –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–µ–≥–æ –∫–ª—é—á–∏, –ø–µ—Ä–µ—á–∏—Å–ª—è—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–Ø –≤—Å—Ç—Ä–µ—á–∞–ª —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `.mjs` –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞, —á—Ç–æ–±—ã –∑–∞—Å—Ç–∞–≤–∏—Ç—å Node —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∫–∞–∫ ES-–º–æ–¥—É–ª—å. –ß–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è, –º–Ω–µ –∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —É—Ä–æ–¥–ª–∏–≤–æ –∏ –Ω–µ–ª–µ–ø–æ, –∏ —è —Å–æ–≤—Å–µ–º –Ω–µ —Ö–æ—Ç–µ–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.

–ú–æ–µ–π –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–æ–π –±—ã–ª [RTK PR #3095: Migrate the RTK package to be full ESM](https://github.com/reduxjs/redux-toolkit/pull/3095). –°–æ–≥–ª–∞—Å–Ω–æ –º–æ–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é PR, –æ–Ω —Å–æ–¥–µ—Ä–∂–∞–ª —Å–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

!!!note ""

    –í –¥–∞–Ω–Ω–æ–º PR —Å–¥–µ–ª–∞–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç RTK –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ "—Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ–¥—É–ª–∏ ESM –∏ CJS, –Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é ESM" –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é ESM —Å `{type: "module"}` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É CJS:

    -   BREAKING: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ RTK `package.json` –∑–Ω–∞—á–µ–Ω–∏–µ `{type: "module"}`.
    -   BREAKING: –û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã `package.json`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `exports` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ —Ç–∏–ø—ã, ESM-—Ñ–∞–π–ª –∏ CJS-—Ñ–∞–π–ª.
    	-   –Ø –≤—Å–µ –µ—â–µ –æ—Å—Ç–∞–≤–ª—è—é `main` –∏ `module`, –ø–æ—Ç–æ–º—É —á—Ç–æ –ö–¢–û –ó–ù–ê–ï–¢, –ü–û–ß–ï–ú–£ –û–ù–ò –ï–©–ï –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø –í –ù–ï–ö–û–¢–û–†–´–• –ò–ù–°–¢–†–£–ú–ï–ù–¢–ê–• –ò–õ–ò –ù–ï–¢ ü§∑‚Äç‚ôÇÔ∏è.
    -   –û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏:
    	-   –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ESM –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—É—Ç–µ–º –∑–∞–º–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `__dirname` –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞ Terser
    	-   –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω—ã –≤—Å–µ —Ü–µ–ª–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ `"esnext"`, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤—ã–≤–æ–¥ –±—É–¥–µ—Ç –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º, –∫—Ä–æ–º–µ TS-—Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏–∏
    	-   –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ CJS –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –≥–ª—É–±–∂–µ –≤ –∫–∞–∂–¥—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤ –ø–∞–ø–∫—É `./cjs/`, —Ç.–µ. `./dist/query/cjs/`.
    	-   –î–æ–±–∞–≤–ª–µ–Ω –ø–∞–∫–µ—Ç `{type: "commonjs"}` —Ñ–∞–π–ª—ã –ø–∞–∫–µ—Ç–æ–≤ –≤ —ç—Ç–∏ –ø–∞–ø–∫–∏.
    	-   –û—Ç–∫–ª—é—á–∏–ª–∏ –Ω–∞ –≤—Ä–µ–º—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ UMD

–ü–æ–ª—É—á–µ–Ω–Ω—ã–π `package.json` –≤—ã–≥–ª—è–¥–µ–ª —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```json
{
    "name": "@reduxjs/toolkit",
    "version": "2.0.0-alpha.1",
    "type": "module",
    "module": "dist/redux-toolkit.modern.js",
    "main": "dist/cjs/index.js",
    "types": "dist/index.d.ts",
    "exports": {
        "./package.json": "./package.json",
        ".": {
            "types": "./dist/index.d.ts",
            "import": "./dist/redux-toolkit.modern.js",
            "default": "./dist/cjs/index.js"
        },
        "./query": {
            "types": "./dist/query/index.d.ts",
            "import": "./dist/query/rtk-query.modern.js",
            "default": "./dist/query/cjs/index.js"
        },
        "./query/react": {
            "types": "./dist/query/react/index.d.ts",
            "import": "./dist/query/react/rtk-query-react.modern.js",
            "default": "./dist/query/react/cjs/index.js"
        }
    }
}
```

–Ø –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–±–æ—Ä–∫–∏ –≤ Vite, CRA4/5, Next –∏ Node, –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `publint`. –ö–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—ç—Ç–æ–º—É —è —Ä–∞–∑–º–µ—Å—Ç–∏–ª PR, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç —Å CI.

**–ò –í–°–Å –í–ó–û–†–í–ê–õ–û–°–¨!!!! üí£üí£üí£**

–Ø –ø–æ—Ç—Ä–∞—Ç–∏–ª –µ—â–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —ç—Ç–∏–º, –∏ —Å–æ–æ–±—â–∏–ª –æ —Å–≤–æ–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö:

!!!note ""

    –ß—Ç–æ –∂. –•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å - —è –¥—É–º–∞—é, —á—Ç–æ –∫–æ–¥ runtime —Ä–∞–±–æ—Ç–∞–µ—Ç.

    –ü–ª–æ—Ö–∞—è –Ω–æ–≤–æ—Å—Ç—å - Jest –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —á—Ç–æ-—Ç–æ –≤ —Å–ø–æ—Å–æ–±–µ –∏–º–ø–æ—Ä—Ç–∞ `redux-thunk` –¥–µ–ª–∞–µ—Ç –∏–º–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—ä–µ–∫—Ç–∞ —Ç–∏–ø–∞ `{default}`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ü–û, –∏ –ø–æ—ç—Ç–æ–º—É —Ç–µ—Å—Ç—ã –≤–∑—Ä—ã–≤–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

    –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∞—Ä—É —á–∞—Å–æ–≤ —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º thunk –∏ –ø–µ—Ä–µ–∏–∑–¥–∞—Ç—å –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ thunk –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Ä–æ–¥–µ –∫–∞–∫ –ø–æ–º–æ–≥–ª–æ, –Ω–æ —Ç–µ–ø–µ—Ä—å —á—Ç–æ-—Ç–æ —Å —Ç–µ—Å—Ç–æ–º "no dev middleware in prod" –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è.

    –í –æ–±—â–µ–º, –±–ª–∏–∑–∫–æ, –Ω–æ –ø–æ–∫–∞ –¥–∞–∂–µ –Ω–µ –º–æ–≥—É —Å–æ–±—Ä–∞—Ç—å —ç—Ç—É –≤–µ—Ç–∫—É.

    **edit**

    –ù–∞ —á—ë–º —è –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –≤—á–µ—Ä–∞, —Ç–∞–∫ —ç—Ç–æ –Ω–∞ —Ç–æ–º, —á—Ç–æ:

    -   `redux-thunk` –∏–º–µ–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏ Jest —Ç–µ–ø–µ—Ä—å –∑–∞–¥—ã—Ö–∞–ª—Å—è –æ—Ç —ç—Ç–æ–≥–æ.
    -   –Ø –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª `redux-thunk@3.0.0-alpha`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø—ã—Ç–∞–ª—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ ESM, –Ω–æ –≤ –Ω–µ–º –≤—Å–µ —Ä–∞–≤–Ω–æ –±—ã–ª –≤–∫–ª—é—á–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –≠—Ç–æ –ø–æ–º–æ–≥–ª–æ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –≤ Next, –Ω–æ –Ω–µ –≤ –Ω–∞—à–∏—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö Jest.
    -   –ó–∞—Ç–µ–º —è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª `redux-thunk` —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, –æ—Ç–∫–∞–∑–∞–≤—à–∏—Å—å –æ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –≤–∫–ª—é—á–∏–≤ —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã. –≠—Ç–æ –≤—Ä–æ–¥–µ –±—ã –ø–æ–º–æ–≥–ª–æ, –Ω–æ –æ–¥–∏–Ω –∏–∑ –Ω–∞—à–∏—Ö RTK-—Ç–µ—Å—Ç–æ–≤, —É—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ `NODE_ENV=production` –¥–ª—è `getDefaultMiddleware`, —Å—Ç–∞–ª –ª–æ–º–∞—Ç—å—Å—è.

    –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ Reactiflux –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª–∏, —á—Ç–æ, –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Vitest. –Ø –±—ã –ø—Ä–µ–¥–ø–æ—á–µ–ª –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç-—Ä–∞–Ω–Ω–µ—Ä –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–æ–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∏–ª–∏ —Ç–µ–º, –Ω–∞ —á—Ç–æ —è —Ö–æ—á—É —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –∫–∞–∫ –≤ —Ü–µ–ª–æ–º, —Ç–∞–∫ –∏ –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã.

## –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Vitest

–ú–Ω–µ –æ—á–µ–Ω—å –Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å –≤—Å–µ–π –Ω–∞—à–µ–π —Ç–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Å Jest –Ω–∞ Vitest. –ù–æ —è —Å–ª—ã—à–∞–ª –º–Ω–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤ –æ Vitest, –≤ —Ç–æ–º —á–∏—Å–ª–µ –æ —Ç–æ–º, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –∏–º–µ–µ—Ç –ª—É—á—à—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É ESM.

–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —è —Ä–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å. –ö –º–æ–µ–º—É –ø—Ä–∏—è—Ç–Ω–æ–º—É —É–¥–∏–≤–ª–µ–Ω–∏—é, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –æ–∫–∞–∑–∞–ª–∞—Å—å –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π.

–í –∏—Ç–æ–≥–µ —è –ø–æ–ª—É—á–∏–ª [RTK PR #3102: Migrate RTK test suite from Jest to Vitest](https://github.com/reduxjs/redux-toolkit/pull/3102).

–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –∞ –∑–∞–º–µ–Ω–∞ `jest.fn()` --> `vi.fn()` –±—ã–ª–∞ –ø—Ä–æ—Å—Ç–æ–π. –°–∞–º–∞—è –±–æ–ª—å—à–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Å –∫–æ—Ç–æ—Ä–æ–π —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è, - —ç—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–¥—Ä—É–∂–∏—Ç—å—Å—è —Å –ø–∞–∫–µ—Ç–æ–º `redux`, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ `configureStore` –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –ü—Ä–∏—à–ª–æ—Å—å –¥–æ–ª–≥–æ –≤–æ–∑–∏—Ç—å—Å—è —Å `vi.mock()`, –ø–æ–∫–∞, –Ω–∞–∫–æ–Ω–µ—Ü, —á—Ç–æ-—Ç–æ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ —Å—Ç–∞–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ.

–í —Ö–æ–¥–µ —ç—Ç–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–Ω–µ —Ç–∞–∫–∂–µ –ø—Ä–∏—à–ª–æ—Å—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É ESM, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã Jest –∏ —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.js`.

–ú–Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Å—Ç–∏ —ç—Ç–æ—Ç PR –∏ —Å–ª–∏—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ –ø–∞—Ä—É –¥–Ω–µ–π.

## –ù–∞—á–∞–ª—å–Ω–æ–µ –∞–ª—å—Ñ–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

21 —è–Ω–≤–∞—Ä—è —è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª `@reduxjs/toolkit@2.0.0-alpha.1`. –û–Ω–∞ –≤–∫–ª—é—á–∞–ª–∞ –≤ —Å–µ–±—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —É–ø–∞–∫–æ–≤–∫–µ RTK, –∞ —Ç–∞–∫–∂–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `redux-thunk`, –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏, –æ—Ç–∫–∞–∑–∞–≤—à–∏—Å—å –æ—Ç —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JS –∏ –æ—Ç–∫–∞–∑–∞–≤—à–∏—Å—å –æ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å IE11.

–ö–æ–Ω–µ—á–Ω–æ, –≤—Å–µ —ç—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ –Ω–µ —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ, –∫–∞–∫ —è –Ω–∞–¥–µ—è–ª—Å—è :)

–ú–∞—Ç–µ—É—à –ë—É—Ä–∂–∏–Ω—å—Å–∫–∏–π ( [@andaristrake](https://twitter.com/andaristrake) ) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏–±–ª–∏–æ—Ç–µ–∫, –≤–∫–ª—é—á–∞—è Emotion –∏ Preconstruct, –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —Ä–∞–±–æ—Ç–∞—è –Ω–∞–¥ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º TypeScript –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è. –û–Ω —è–≤–ª—è–µ—Ç—Å—è —ç–∫—Å–ø–µ—Ä—Ç–æ–º –ø–æ –º–Ω–æ–≥–∏–º —Å–ª–æ–∂–Ω—ã–º –Ω—é–∞–Ω—Å–∞–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–ø–∞–∫–æ–≤–∫–∏.

–ö–æ–≥–¥–∞ —è –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–ª `alpha.2` –≤ Twitter, [–ú–∞—Ç–µ—É—à –æ—Ç–≤–µ—Ç–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ](https://twitter.com/AndaristRake/status/1625781199724576768) (—Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—è –∞–ª—å—Ñ—ã RTK 2.0 –∏ Redux core 5.0):

!!!note ""

    –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ —Ç–∞–∫–æ–µ `dist/es/redux.mjs`, –µ—Å–ª–∏ –µ–≥–æ –¥–∞–∂–µ –Ω–µ—Ç –≤ –∫–∞—Ä—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤

    –ø—Ä–∏ —Ç–∞–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è types TS –º–æ–∂–µ—Ç –≤—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –º–æ–¥—É–ª—å, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω/—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑ CJS target~. –ü–æ—Å–∫–æ–ª—å–∫—É —É –≤–∞—Å –Ω–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é... —ç—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

    –Ø –±—ã –≤–∫–ª—é—á–∏–ª —É—Å–ª–æ–≤–∏–µ –º–æ–¥—É–ª—è –∏ —É–∫–∞–∑–∞–ª –≤ –Ω–µ–º `./dist/es/index.js`, —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–∞–∫–µ—Ç—É –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –±–∞–Ω–¥–ª–µ—Ä–∞–º–∏, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ñ–æ—Ä–º–∞—Ç –ø–æ—Ç—Ä–µ–±–ª—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ (`cjs` vs `esm`)

    –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç `process.env.NODE_ENV` –≤ —Ñ–∞–π–ª–∞—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∑–∞–¥–∞—á (–≤–æ–∑–º–æ–∂–Ω–æ, –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É - –ø–æ –∂–µ–ª–∞–Ω–∏—é)

–Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª –∏—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.

–í—Å–∫–æ—Ä–µ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –≤ `alpha.1/2`:

-   [RTK #3202: Cannot resolve types when moduleResolution is set to node16](https://github.com/reduxjs/redux-toolkit/issues/3202):

!!!note ""

    –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —á–µ–≥–æ-–ª–∏–±–æ –∏–∑ `@reduxjs/toolkit@2.0.0-alpha.2`, typescript –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–∏–ø—ã, –µ—Å–ª–∏ `moduleResolution` –≤ `tsconfig.json` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `"node16"` –∏–ª–∏ `"nodenext"`. –Ø –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `.js` –∫ –∏–º–ø–æ—Ä—Ç—É –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É.

-   [RTK #3208: Invalid exports config for CJS consumption w/ Node](https://github.com/reduxjs/redux-toolkit/issues/3208):

!!!note ""

    –¢–µ–∫—É—â–∏–π –∫–æ–Ω—Ñ–∏–≥ –≤ Alpha –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç CJS –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Node/–ª—é–±–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π Node, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.js` –¥–ª—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–æ–¥—É–ª—å CJS, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞–∫–µ—Ç–∞ `"type": "module"`. –ï—Å–ª–∏ `"type": "module"` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Ç–æ `.cjs` –Ω–µ–æ–±—Ö–æ–¥–∏–º –≤ `"exports"`.

    –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–∞–Ω–¥–ª–µ—Ä—ã –æ–±—Ö–æ–¥—è—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –∏ –±–æ–ª–µ–µ —Å–Ω–∏—Å—Ö–æ–¥–∏—Ç–µ–ª—å–Ω—ã (—Ö–æ—Ä–æ—à–æ —ç—Ç–æ –∏–ª–∏ –Ω–µ—Ç - –≤–æ–ø—Ä–æ—Å –¥—Ä—É–≥–æ–π), –Ω–æ —Ç–∞–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ Node –∏/–∏–ª–∏ –≤ –¥—Ä—É–≥–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –µ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.

–Ø –±—ã–ª... –Ω–µ –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ:

!!!note ""

    –Ø –∏—Å–∫—Ä–µ–Ω–Ω–µ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –≤–∞–º –∑–∞ —Ç–æ, —á—Ç–æ –≤—ã –æ–±—Ä–∞—Ç–∏–ª–∏—Å—å —Å –ø—Ä–æ–±–ª–µ–º–æ–π, –Ω–æ —è —Ç–∞–∫–∂–µ –∏—Å–∫—Ä–µ–Ω–Ω–µ –∑–ª—é—Å—å –Ω–∞ —Ç–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—É—Ç–∞–Ω–Ω–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤—Å—è —ç—Ç–∞ —Å–∏—Ç—É–∞—Ü–∏—è :(

    –Ø —Ö–æ—á—É –ø–æ—Å—Ç—É–ø–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–≤–æ–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å—Ä–µ–¥—ã —Å–±–æ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ, –∫–∞–∫ —è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é, –æ–Ω–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

    –ù–æ —è –Ω–µ –º–æ–≥—É —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∫–∞–∂–¥–∞—è —Å—Ç–∞—Ç—å—è –∏ –∫–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ –¥–∞—é—Ç –º–Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ —Ç–æ–º, —á—Ç–æ —è –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å :(

–û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ —ç—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–∏—Ö —É—Å–∏–ª–∏–π, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–º –∏ –≤—ã—è–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏.

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ª—É—á—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ö–∞–∫ —Ä–∞–∑ –≤ —ç—Ç–æ –∂–µ –≤—Ä–µ–º—è [–î–µ–≤–æ–Ω –ì–æ–≤–µ—Ç—Ç –Ω–∞–ø–∏—Å–∞–ª –≤ —Ç–≤–∏—Ç—Ç–µ—Ä–µ –æ–± —É–ª—É—á—à–µ–Ω–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Node+ESM –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ React-Aria](https://twitter.com/devongovett/status/1629161014812897282).

–Ø –æ—Ç–≤–µ—Ç–∏–ª, –æ—Ç–º–µ—Ç–∏–≤, —á—Ç–æ —Ä–∞–±–æ—Ç–∞—é –Ω–∞–¥ —á–µ–º-—Ç–æ –ø–æ—Ö–æ–∂–∏–º, –∏ –ø–æ–º–µ—Ç–∏–ª –ú–∞—Ç–µ—É—à–∞. –í—Å–∫–æ—Ä–µ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è —É–≤–∏–¥–µ–ª, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã, —Å–≤—è–∑–∞–Ω—ã –∏ —Å–∫—Ä–µ–∂–µ—Ç–∞–ª–∏ –ø–æ –Ω–∏–º, –∏ –ú–∞—Ç–µ—É—à —Å–Ω–æ–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–∏–ª —É–¥–∞–ª–∏—Ç—å `type: "module"`.

–Ø –±—ã–ª —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω –∏ —É–º–æ–ª—è–ª –µ–≥–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∑–∞–ø–∏—Å—å –≤ –±–ª–æ–≥–µ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –µ–≥–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ø–æ–∑–≤–æ–Ω–∏—Ç—å –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏ –æ–±—Å—É–¥–∏—Ç—å –≤—Å–µ –Ω–∞–ø—Ä—è–º—É—é.

27 —Ñ–µ–≤—Ä–∞–ª—è –º—ã —Å –ú–∞—Ç–µ—É—à–µ–º –∏ –ù–∞—Ç–∞–Ω–æ–º –ë–∏—Ä–µ–º–æ–π (—Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–º Redux DevTools) –ø—Ä–∏–Ω—è–ª–∏ —É—á–∞—Å—Ç–∏–µ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–µ. –Ø —Å–æ—Ö—Ä–∞–Ω–∏–ª –∑–∞–ø–∏—Å–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –≤ gist:

-   [RTK ESM/TS Discussion: Mateusz Burzy≈Ñski](https://gist.github.com/markerikson/42d55b0fd970449fc5d84263f4775cbd#file-rtk-esm-ts-notes-2023-02-27-md)

–ú–∞—Ç–µ—É—à –≤—ã—Å–∫–∞–∑–∞–ª –º–Ω–æ–≥–æ –º—ã—Å–ª–µ–π –æ —Ç–æ–º, –∫–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ESM –∏ CJS, –∞ —Ç–∞–∫–∂–µ —É—Å–æ–º–Ω–∏–ª—Å—è –≤ —Ç–æ–º, —á—Ç–æ –≤–æ–æ–±—â–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å ESM. –í —Ü–µ–ª–æ–º, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—ã–ª–∞ –ø–æ–ª–µ–∑–Ω–æ–π, –Ω–æ —è –æ—Å—Ç–∞–ª—Å—è –≤ –∑–∞–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–æ–≤.

–ì–¥–µ-—Ç–æ –≤ —Ö–æ–¥–µ —ç—Ç–æ–π –¥–∏—Å–∫—É—Å—Å–∏–∏ –≤ Twitter —è —Å–≤—è–∑–∞–ª—Å—è —Å [Andrew Branch](https://twitter.com/atcb) (@atcb), —á–ª–µ–Ω–æ–º –∫–æ–º–∞–Ω–¥—ã TypeScript, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –Ω–æ–≤—É—é –æ–ø—Ü–∏—é `moduleResolution: "bundler"` –¥–ª—è TS, –∞ —Ç–∞–∫–∂–µ –∑–∞–Ω–∏–º–∞–ª—Å—è —Ä–∞–±–æ—Ç–æ–π –Ω–∞–¥ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –º–æ–¥—É–ª–µ–π –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ JS/TS –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é. –ú—ã –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –≤—Å—Ç—Ä–µ—á—É –Ω–∞ 28 —Ñ–µ–≤—Ä–∞–ª—è.

-   [RTK ESM/TS Discussion: Andrew Branch](https://gist.github.com/markerikson/42d55b0fd970449fc5d84263f4775cbd#file-tk-esm-ts-notes-2023-02-28-md)

–≠–Ω–¥—Ä—é —Ä–∞—Å—Å–∫–∞–∑–∞–ª –º–Ω–µ –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ESM, –∫–∞–∫ TS –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ ESM –∏ –ø—É—Ç—è–º –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π, –∏ –∫–∞–∫ Node –∏ –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ–∞–π–ª –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ ESM.

TL;DR —ç—Ç–æ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–≤:

-   –ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–∏—Ç–µ `type: "module"`, —Ç–æ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.js` –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ ESM, –∏ —Ç–æ—á–∫–∞. –§–∞–π–ª—ã `.cjs` –±—É–¥—É—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ CommonJS.
-   –í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç `type: "module"`, —Ñ–∞–π–ª—ã `.js` –±—É–¥—É—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ CommonJS. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.mjs`, —á—Ç–æ–±—ã –ø–æ–º–µ—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–∞–∫ ESM.

–¢–∞–∫–∂–µ –æ–±—Å—É–∂–¥–∞–ª—Å—è –≤–æ–ø—Ä–æ—Å –æ —Ç–æ–º, —Å–ª–µ–¥—É–µ—Ç –ª–∏ –Ω–∞–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –Ω–∞—à–∏ —Ç–∏–ø–∏–∑–∞—Ç–æ—Ä—ã TS –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∏—Ö –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ `someSourceFile.d.ts` –≤ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–º –ø–∞–∫–µ—Ç–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ CI –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏

### –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CI

–Ø –¥–∞–≤–Ω–æ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–ª, —á—Ç–æ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –º–Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è —Å–æ–±—Ä–∞—Ç—å –Ω–µ–∫—É—é –±–∞—Ç–∞—Ä–µ—é –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏, —á—Ç–æ–±—ã –æ—Ç–ª–∞–≤–ª–∏–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ —É–ø–∞–∫–æ–≤–∫–µ –ø—Ä–∏ PR CI –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö.

–ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ –≤—ã–ø—É—Å–∫–µ `alpha.2` —è —Å –Ω–µ–æ—Ö–æ—Ç–æ–π –ø—Ä–∏—à–µ–ª –∫ –≤—ã–≤–æ–¥—É, —á—Ç–æ –º–Ω–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —ç—Ç–∏—Ö CI-–ø—Ä–æ–≤–µ—Ä–∫, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –ø–∞–∫–µ—Ç–æ–≤.

–í —Ä–∞–º–∫–∞—Ö –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —è –ª–æ–∫–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–ª –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ –≤—Å–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ RTK. –í –Ω–µ–º –±—ã–ª —Å—á–µ—Ç—á–∏–∫ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `configureStore` –∏ `createSlice` –∏–∑ —è–¥—Ä–∞, –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ RTKQ `createApi`, –Ω–µ –∑–∞–≤–∏—Å—è—â–∞—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –∏ –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ RTKQ `createApi`, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –¥–ª—è React. –Ø –≤—Å—Ç–∞–≤–∏–ª —ç—Ç–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞.

–£ –Ω–∞—Å —É–∂–µ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω CI –Ω–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É —Ç–∞—Ä–±–æ–ª–∞ —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –ø–∞–∫–µ—Ç–∞ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ PR, –∏ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –µ–≥–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞—à–∏—Ö —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ –ø–æ –≤–µ—Ä—Å–∏–∏ PR-–ø–∞–∫–µ—Ç–∞ –≤–º–µ—Å—Ç–æ –Ω–∞—à–µ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞. –Ø —Ä–µ—à–∏–ª —Ä–∞—Å—à–∏—Ä–∏—Ç—å —ç—Ç—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ PR-—Å–±–æ—Ä–∫–µ.

–Ø —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–≤—ã–µ –ø–∞—Ä—É –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –Ω–æ–≤—É—é –ø–∞–ø–∫—É `$REPO/examples/publish-ci/` –∏ –æ–±–Ω–æ–≤–∏–ª —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å GH Action, —á—Ç–æ–±—ã –º–∞—Ç—Ä–∏—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–º–µ–Ω–∞ –ø–∞–ø–æ–∫ –≤–Ω—É—Ç—Ä–∏ `/publish-ci/`, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PR-—Å–±–æ—Ä–∫—É –≤ –∫–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä, –∞ –∑–∞—Ç–µ–º —Å–æ–±—Ä–∞—Ç—å+—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–µ:

-   [RTK PR #3213: Test published artifacts in CI](https://github.com/reduxjs/redux-toolkit/pull/3213)

–Ø —Ç–∞–∫–∂–µ –Ω–∞–ø–∏—Å–∞–ª –Ω–µ–±–æ–ª—å—à–æ–π —Ç–µ—Å—Ç Playwright, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–ª —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –∏ —Ç–æ–≥–æ, —á—Ç–æ –æ–±–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ API –ø–æ–ª—É—á–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è –Ω–∞–ø—Ä–∞–≤–∏–ª PR –Ω–∞ –≤–µ—Ä—Å–∏—é 1.9.x –≤ –Ω–∞—à–µ–π –≤–µ—Ç–∫–µ `master`, —á—Ç–æ–±—ã —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–∞–∫–µ—Ç–æ–º.

–í –∏—Ç–æ–≥–µ —è –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç:

-   CRA 4 (—Å Webpack 4)
-   CRA 5 (—Å Webpack 5)
-   Next.js (—Å Webpack 5)
-   Vite 4
-   Node –≤ —Ä–µ–∂–∏–º–∞—Ö CJS –∏ ESM.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç [–º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Å–ª–µ–¥–æ–≤–∞–ª–æ –±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å](https://github.com/reduxjs/redux-toolkit/issues/3365), –Ω–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—á–∞–ª–æ.

### Are The Types Wrong?

–ì–¥–µ-—Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã —è –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –≠–Ω–¥—Ä—é –ë—Ä–∞–Ω—á —Å–æ–∑–¥–∞–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [Are The Types Wrong](https://arethetypeswrong.github.io/). –≠—Ç–æ —Å–∞–π—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã–±—Ä–∞—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ø–∞–∫–µ—Ç–∞ NPM –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª `.tgz`, –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π —ç–∫—Å–ø–æ—Ä—Ç –ø–∞–∫–µ—Ç–æ–≤, —á—Ç–æ–±—ã —Å–æ–æ–±—â–∏—Ç—å, –∫–∞–∫ TypeScript –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ JS-—Ñ–∞–π–ª–æ–≤ –∏ TS. –ó–∞—Ç–µ–º –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏ —Å–æ–æ–±—â–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ –ª—é–±—ã—Ö –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è—Ö –∏ –æ—à–∏–±–∫–∞—Ö.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞ –¥–ª—è RTK `2.0.0-alpha.2` ( [https://arethetypeswrong.github.io](https://arethetypeswrong.github.io/) ):

![example of the report for RTK 2.0.0-alpha.2](esm-modernization-lessons-1.png)

–í–∏–¥–Ω–æ, —á—Ç–æ –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–ª –≤—Å–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ RTK, –∏ —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ + `moduleResolution` –≤—ã–≥–ª—è–¥—è—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –û–¥–Ω–∞–∫–æ `moduleResolution: "node16"` + –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ CJS, –æ—á–µ–≤–∏–¥–Ω–æ, –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º.

–ú–Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ç–µ–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –≤ CI RTK, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª—é–±—ã–µ –±—É–¥—É—â–∏–µ PR-–∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –Ø –ø–æ—Å–º–æ—Ç—Ä–µ–ª –Ω–∞ [—Ä–µ–ø–æ `attw`](https://github.com/arethetypeswrong/arethetypeswrong.github.io) –∏ –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –≠–Ω–¥—Ä—é —Ä–∞–∑–¥–µ–ª–∏–ª –µ–≥–æ –Ω–∞ –ø–∞–∫–µ—Ç—ã `core` –∏ `website`. –ù–æ –ª–æ–≥–∏–∫–∞ —è–¥—Ä–∞ –µ—â–µ –Ω–µ –±—ã–ª–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ –≤ –≤–∏–¥–µ –ø–∞–∫–µ—Ç–∞.

–°–Ω–∞—á–∞–ª–∞ —è –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É CI, –∫–æ—Ç–æ—Ä–∞—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∞ –±—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `attw` –∏ –ø–æ–∑–≤–æ–ª—è–ª–∞ –Ω–∞–ø–∏—Å–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª –±—ã –ª–æ–≥–∏–∫—É —è–¥—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–±–æ—Ä–∫–∏ PR. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–æ, –∫ —Å—á–∞—Å—Ç—å—é, –º–Ω–µ —É–¥–∞–ª–æ—Å—å —É–±–µ–¥–∏—Ç—å –≠–Ω–¥—Ä—é –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –≤–∏–¥–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ `@arethetypeswrong/core`.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —è —Å–æ–∑–¥–∞–ª [CLI-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–ª –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É `attw`, —Å–æ–±–∏—Ä–∞–ª –æ—Ç—á–µ—Ç—ã –∏ –≤—ã–≤–æ–¥–∏–ª –∏—Ö –≤ –≤–∏–¥–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã](https://github.com/reduxjs/redux-toolkit/blob/f31ff77ad01f6cdbdbbd4a701718ac8445e34b91/examples/publish-ci/are-the-types-wrong/main.tsx), —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é –Ω–∞ —Å–∞–π—Ç–µ. –î–ª—è —ç—Ç–æ–≥–æ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–µ—Ä React CLI (–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–∞—Ç–∏–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≤–æ–∑–∏—Ç—å—Å—è —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º —Ç–∞–±–ª–∏—Ü –≤ –∫–æ–Ω—Å–æ–ª–∏). –í –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∏–ª—Å—è –Ω–µ–ø–ª–æ—Ö–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

![The results ended up pretty good](esm-modernization-lessons-2.png)

–ó–∞—Ç–µ–º —è –Ω–∞—Å—Ç—Ä–æ–∏–ª CI RTK —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –≤—ã–∑—ã–≤–∞–ª—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –µ—â–µ –æ–¥–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Ä—è–¥—É —Å–æ —Å–±–æ—Ä–∫–æ–π –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

–ë—ã–ª–∞ [—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–µ–º–∞ —Å –ø—Ä–æ—Å—å–±–æ–π attw –¥–æ–±–∞–≤–∏—Ç—å CLI](https://github.com/arethetypeswrong/arethetypeswrong.github.io/issues/15), –ø–æ—ç—Ç–æ–º—É —è –ø—Ä–µ–¥–ª–æ–∂–∏–ª —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–∏. (–ö—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π [–ø–æ–∑–∂–µ –ø–æ–¥–∞–ª PR –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ CLI](https://github.com/arethetypeswrong/arethetypeswrong.github.io/pull/26). –¢–µ–ø–µ—Ä—å —ç—Ç–æ—Ç CLI [–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ](https://github.com/arethetypeswrong/arethetypeswrong.github.io/tree/main/packages/cli), –∏ –º–Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CI –≤–º–µ—Å—Ç–æ –º–æ–µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–ø–∞–∫–æ–≤–∫–∏, —Ä–∞—É–Ω–¥ 2

–Ø —Ä–µ—à–∏–ª, —á—Ç–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –ø–∞–∫–µ—Ç—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç RTK.

–ú–Ω–µ —É–∂–µ –ø—Ä–∏—à–ª–æ—Å—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å `3.0-alpha.0` –¥–ª—è `redux-thunk`, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –Ø —Ä–µ—à–∏–ª, —á—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á—É—Å—å –∏ –ø–æ–ø—Ä–æ–±—É—é —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –µ–≥–æ –ø–æ–º–æ—â—å—é.

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏—è —Å–±–æ—Ä–∫–∏

`redux-thunk` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–¥–∏–Ω –∫—Ä–æ—à–µ—á–Ω—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –¥–ª–∏–Ω–æ–π –æ–∫–æ–ª–æ 20 —Å—Ç—Ä–æ–∫ (–ø–ª—é—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ TS). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ —Ö–æ—Ä–æ—à–µ–π –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–ø–∞–∫–æ–≤–∫–∏.

–Ø –æ–±—Ä–∞—Ç–∏–ª –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –æ–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Babel+Rollup. –Ø —Ä–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ ESBuild. –ù–æ –∫–∞–∫ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

–£ –Ω–∞—Å —É–∂–µ –±—ã–ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç-–æ–±–µ—Ä—Ç–∫–∞ ESBuild –≤ RTK. –Ø –Ω–µ–Ω–∞–¥–æ–ª–≥–æ –∑–∞–¥—É–º–∞–ª—Å—è –æ —Ç–æ–º, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `redux-thunk`, –Ω–æ —Ä–µ—à–∏–ª, —á—Ç–æ —ç—Ç–æ –±—É–¥–µ—Ç –∏–∑–ª–∏—à–Ω–∏–º.

–†–∞–Ω–µ–µ —è —É–∂–µ –∏—Å–∫–∞–ª –¥—Ä—É–≥–∏–µ –æ–±—ë—Ä—Ç–∫–∏ –¥–ª—è ESBuild. –Ø –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞–ª –∏ —Ä–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å [https://github.com/egoist/tsup](https://github.com/egoist/tsup).

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ `tsup` —Å—Ä–∞–±–æ—Ç–∞–ª –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ! –ó–∞ –ø–∞—Ä—É —á–∞—Å–æ–≤ —è –ø–æ–ª—É—á–∏–ª –ø—Ä–æ—Å—Ç–æ–π —Ñ–∞–π–ª `tsup.config.ts`, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –¥–≤–∞ –Ω—É–∂–Ω—ã—Ö –º–Ω–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∫–æ–¥ thunk –Ω–µ –∏–º–µ–ª —É—Å–ª–æ–≤–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ dev/prod, –ø–æ—ç—Ç–æ–º—É —è –≤—Å–µ —É–ø—Ä–æ—Å—Ç–∏–ª - —Ç–æ–ª—å–∫–æ –ø–æ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É ESM –∏ CJS.

–Ø —Ç–∞–∫–∂–µ —É–¥–∞–ª–∏–ª `type: "module"`, –∏ –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.mjs` –∏ `.cjs` –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, —á—Ç–æ–±—ã –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ESM –∏–ª–∏ CJS —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

–Ø –æ–±–Ω–æ–≤–∏–ª —Ñ–∞–π–ª Thunk `package.json`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö:

```json
{
    "name": "redux-thunk",
    "version": "3.0.0-alpha.1",
    "main": "dist/cjs/index.cjs",
    "module": "dist/index.mjs",
    "types": "dist/index.d.ts",
    "exports": {
        "./package.json": "./package.json",
        ".": {
            "types": "./dist/index.d.ts",
            "import": "./dist/index.mjs",
            "default": "./dist/cjs/index.cjs"
        },
        "./extend-redux": {
            "types": "./extend-redux.d.ts"
        }
    }
}
```

–¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º, —è —Å–¥–µ–ª–∞–ª –≤—Å–µ —Ç–µ –∂–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Jest-->Vitest, —á—Ç–æ –∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ RTK.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ UMD

–Ø —Ç–∞–∫–∂–µ –ø–æ—Ç—Ä–∞—Ç–∏–ª –∫—É—á—É –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —Ç–æ–≥–æ, —Å—Ç–æ–∏—Ç –ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å UMD-—Ñ–∞–π–ª—ã –∏–ª–∏ –Ω–µ—Ç. `redux-thunk` –ø–æ—Å—Ç–∞–≤–ª—è–ª—Å—è —Å –ø–∞–∫–µ—Ç–æ–º UMD, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–∫—Ä–∏–ø—Ç–æ–≤—ã—Ö —Ç–µ–≥–æ–≤ (—á—Ç–æ, –∫–∞–∫ —è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–µ–ª–∞–µ—Ç—Å—è –≤ CodePens –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö).

–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∞—Ä—É –ª–µ—Ç —è –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –∑–∞–¥–∞–≤–∞–ª –≤–æ–ø—Ä–æ—Å –æ —Ç–æ–º, —Å—Ç–æ–∏—Ç –ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å UMD-—Å–±–æ—Ä–∫–∏.

–ù–∞–∏–±–æ–ª–µ–µ –±–ª–∏–∑–∫–∏–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–≤–µ—Ç–∞–º –∏ –æ—Ç–≤–µ—Ç–∞–º –±—ã–ª–∏:

-   [Fred K Schott](https://twitter.com/acemarke/status/1411803139716665344): "HTML-–ø—Ä–∏–º–µ—Ä—ã –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –∫–æ–¥–∞ - —ç—Ç–æ –¥–∞–∂–µ –Ω–µ –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è UMD, —Å–∞–º–∏ –ø–æ —Å–µ–±–µ. –ù–∞–ø—Ä–∏–º–µ—Ä: @CodePen –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å–æ Skypack"
-   [Marvin Hagemeister](https://twitter.com/marvinhagemeist/status/1642573135701504002): "–Ø –¥—É–º–∞—é, —á—Ç–æ –≤–ø–æ–ª–Ω–µ –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ UMD. –í—Å–µ –±–∞–Ω–¥–ª–µ—Ä—ã –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å ESM, –∞ —Å —Ç–∞–∫–∏–º–∏ —Å–∞–π—Ç–∞–º–∏, –∫–∞–∫ [https://esm.sh](https://esm.sh/), –µ–≥–æ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ."

–ò—Ç–∞–∫, —è —Ä–µ—à–∏–ª, —á—Ç–æ –Ω–∞—Å—Ç–∞–ª–æ [–Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –ø–æ—Ä–∞ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç UMD-—Å–±–æ—Ä–æ–∫ –≤ –ø–∞–∫–µ—Ç–∞—Ö Redux](https://twitter.com/acemarke/status/1642570701772058624) :)

–ü–æ–∑–∂–µ —è —Ä–µ—à–∏–ª, —á—Ç–æ –ª—É—á—à–µ–π –∑–∞–º–µ–Ω–æ–π UMD –±—É–¥–µ—Ç –¥—Ä—É–≥–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–±–æ—Ä–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ ESM, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ production mode –∏ –±–æ–ª—å—à–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—Å—ã–ª–æ–∫ `process.env.NODE_ENV`, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª—é–¥–∏ –º–æ–≥–ª–∏ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ `<script type="module">` –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑ –ø–∞–∫–µ—Ç–∞, —Ä–∞–∑–º–µ—â–µ–Ω–Ω–æ–≥–æ –Ω–∞ Unpkg –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π CDN.

(–Ø –∑–∞–ø—Ä–æ—Å–∏–ª –æ—Ç–∑—ã–≤—ã –æ —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è UMD –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –∫ –∞–ª—å—Ñ–∞-/–±–µ—Ç–∞-–≤–µ—Ä—Å–∏—è–º –∏ –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏–ª –Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è... –Ω–æ –º—ã –≤—Å–µ –∑–Ω–∞–µ–º, —á—Ç–æ –ø–æ—á—Ç–∏ –Ω–∏–∫—Ç–æ –Ω–µ –¥–∞–µ—Ç –æ—Ç–∑—ã–≤–æ–≤ –æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö ü§∑‚Äç‚ôÇÔ∏è)

### Webpack 4 Compat

–í –Ω–∞—á–∞–ª–µ –º–∞—Ä—Ç–∞ —è —É–≤–∏–¥–µ–ª —Ç–≤–∏—Ç –î–æ–º–∏–Ω–∏–∫–∞ –î–æ—Ä—Ñ–º–∞–π—Å—Ç–µ—Ä–∞ (—Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–µ–≥–æ React Query) –æ —Ç–æ–º, —á—Ç–æ [Webpack 4 –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å–∫–∞—á–∏–≤–∞—é—Ç –±–æ–ª—å—à–µ, —á–µ–º Webpack 5](https://twitter.com/TkDodo/status/1632854140320710656). –í –æ—Å–Ω–æ–≤–Ω–æ–º —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º–∏ Webpack –≤–Ω—É—Ç—Ä–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ CRA 4, Storybook 6, Expo's web target –∏ —Ç.–¥., –∞ —Ç–∞–∫–∂–µ —Å –æ–±—â–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã.

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, [Webpack 4 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–µ –ø–∞–∫–µ—Ç–∞ `"exports"`](https://github.com/webpack/webpack/issues/9509), –∞ —Ç–∞–∫–∂–µ [–Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–æ–¥ —Å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º —Ü–µ–ø–æ—á–µ–∫](https://github.com/webpack/webpack/issues/10227). –ù–∞–∫–æ–Ω–µ—Ü, —è –≤—ã—è—Å–Ω–∏–ª, —á—Ç–æ [–µ–º—É —Ç–∞–∫–∂–µ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `.mjs` –≤ –ø–æ–ª–µ `"main"`](https://github.com/reduxjs/redux-toolkit/pull/3318#issuecomment-1493645057), –∏ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.js`.

–ß–∞—Å—Ç—å—é –º–æ–µ–π —Ü–µ–ª–∏ –≤ —ç—Ç–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö –±—ã–ª–æ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JS, —Ç—Ä–∞–Ω—Å–ø–∏–ª—è—Ü–∏—è —Ç–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ TS –∏ –ø–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ JS. –û–¥–Ω–∞–∫–æ —è —Ç–∞–∫–∂–µ –∑–∞–±–æ—á—É—Å—å –æ —Ç–æ–º, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ö–æ—Ä–æ—à–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –∏–∑ –∫–æ—Ä–æ–±–∫–∏. –ë—ã–ª–æ —è—Å–Ω–æ, —á—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤—ã–∑–æ–≤–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —É —Ç–µ—Ö, –∫—Ç–æ –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Webpack 4.

–Ø –Ω–µ—Ö–æ—Ç—è —Ä–µ—à–∏–ª, —á—Ç–æ –≤–∫–ª—é—á—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Webpack 4: ESM-–º–æ–¥—É–ª—å, –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ES2017 –∏ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `.js`, –∏ —É–∫–∞–∑–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ –≤ –ø–æ–ª–µ `"main"`.

### Immer 10 Beta

–ú–∏—à–µ–ª—å –í–µ—Å—Ç—Å—Ç—Ä–∞—Ç, –∞–≤—Ç–æ—Ä [–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π Immer](https://immerjs.github.io/immer/), –µ—â–µ –≤ —è–Ω–≤–∞—Ä–µ –∑–∞—è–≤–∏–ª, —á—Ç–æ [–ø–ª–∞–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ Immer 10 –≤–µ—Å–Ω–æ–π](https://github.com/immerjs/immer/issues/1015#issuecomment-1404860676). –û—Å–Ω–æ–≤–Ω—ã–µ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Å–∞–ª–∏—Å—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—Ç–∫–∞–∑–∞ –æ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º ES5. –û–¥–Ω–∞–∫–æ Immer —Ç–∞–∫–∂–µ –∏–º–µ–ª –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ö–æ–∂–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —É–ø–∞–∫–æ–≤–∫–æ–π, –≤–∫–ª—é—á–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —ç–∫—Å–ø–æ—Ä—Ç–æ–≤. Immer –¥–æ–±–∞–≤–∏–ª–∞ `"exports"` –≤ [–ø–∞—Ç—á-—Ä–µ–ª–∏–∑–µ 9.x](https://github.com/immerjs/immer/issues/937), –∏ —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –ø–æ–ª–æ–º–∫–µ –º–Ω–æ–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –±—ã–ª–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –Ω–∞–ø–æ–ª–æ–≤–∏–Ω—É –ø–µ—Ä–µ–¥–µ–ª–∞–Ω–æ, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —á–µ–≥–æ —É Immer –æ—Å—Ç–∞–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞.

–í —è–Ω–≤–∞—Ä–µ —è –æ—Å—Ç–∞–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Ç–º–µ—á–∞–ª, [—á—Ç–æ —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–∫–µ—Ç–∞–º–∏, –∏–º–µ—é—â–∏–º–∏ —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø–æ –∏–º–µ–Ω–∏](https://github.com/immerjs/immer/issues/937#issuecomment-1386385087), –ø–æ—ç—Ç–æ–º—É Michel —Ä–µ—à–∏–ª –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –≤–µ—Ä—Å–∏–∏ 10.0.

–ö–∞–∫ —Ç–æ–ª—å–∫–æ Immer 10 –≤—ã—à–µ–ª –≤ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏, —è –æ–±–Ω–æ–≤–∏–ª –≤–µ—Ç–∫—É RTK 2.0, —á—Ç–æ–±—ã –æ–Ω–∞ –∑–∞–≤–∏—Å–µ–ª–∞ –æ—Ç –Ω–µ–≥–æ.

### TypeScript-–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏

Redux 4.x –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–º –≤—Ä—É—á–Ω—É—é —Ñ–∞–π–ª–æ–º —Ç–∏–ø–∏–∑–∞—Ü–∏–π TS. RTK 1.x –∏–º–µ–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ TS typedefs —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤.

–í `tsup` –µ—Å—Ç—å –æ–ø—Ü–∏—è `dts: true`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç `tsc` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–π –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è Redux, –Ω–æ –¥–ª—è RTK —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π. –í –∏—Ç–æ–≥–µ —è –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ —Ç–æ–º, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ RTK –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–∏–ø–∏–∑–∞—Ü–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —É –º–µ–Ω—è –±—ã–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É `are-the-types-wrong`, –∑–∞ –æ–¥–Ω–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ `"FalseCJS"` –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ ESM –≤ —Ä–µ–∂–∏–º–µ `moduleResolution: "node16"`.

–ü–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É —É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è —Å –≠–Ω–¥—Ä—é –ë—Ä–∞–Ω—á–µ–º. –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ TS –¥–ª—è "–º–æ–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ CJS" –∏ "–º–æ–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ ESM", –ø–æ—Å–∫–æ–ª—å–∫—É [–º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –≤ —Ç–æ–º, —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏ –∫–∞–∫ –∫ —ç—Ç–æ–º—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è](https://github.com/arethetypeswrong/arethetypeswrong.github.io/blob/main/docs/problems/FalseCJS.md).

–ü–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –≠–Ω–¥—Ä—é –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã, –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å `tsc` –¥–≤–∞–∂–¥—ã, —Å –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –º–æ–¥—É–ª—è TS, –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–±–æ—Ä–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏–π —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ `.d.mts` –∏ `.d.ts` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤–∞—à–∏–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º `.mjs` –∏ `.cjs/js`.

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–∏ –æ–¥–∏–Ω –∏–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –º–Ω–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ –≤ —Ç–æ –≤—Ä–µ–º—è –Ω–µ –¥–µ–ª–∞–ª —ç—Ç–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ –∏–¥–µ—è –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å 99% –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Ç–∏–ø–∏–∑–∞—Ç–æ—Ä–æ–≤ –º–µ–Ω—è –±–µ—Å–ø–æ–∫–æ–∏–ª–∞. –ü–æ—ç—Ç–æ–º—É —è —Ä–µ—à–∏–ª –Ω–µ –ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É `"FalseCJS"` –¥–ª—è –Ω–∞—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ (–ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç).

–ü–æ–∑–∂–µ –≠–Ω–¥—Ä—é –ë—Ä–∞–Ω—á –ø–æ–¥–∞–ª [PR –¥–ª—è `tsup`, –∫–æ—Ç–æ—Ä—ã–π –ø—ã—Ç–∞–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª typedefs –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–≤–æ–¥–∞](https://github.com/egoist/tsup/pull/934). –ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —ç—Ç–æ–π –∑–∞–º–µ—Ç–∫–∏ —è –µ—â–µ –Ω–µ –æ–ø—Ä–æ–±–æ–≤–∞–ª —ç—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –Ω–æ –ø–æ–ø—Ä–æ–±—É—é –ø–æ–∑–∂–µ –∏ –ø–æ—Å–º–æ—Ç—Ä—é, —á—Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è.

–û—Ç–º–µ—Ç–∏–º, —á—Ç–æ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —É –≠–Ω–¥—Ä—é –µ—Å—Ç—å [–æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π gist —Å –µ–≥–æ WIP-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –æ —Ç–æ–º, –∫–∞–∫ TS –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—ã –º–æ–¥—É–ª–µ–π](https://gist.github.com/andrewbranch/79f872a8b9f0507c9c5f2641cfb3efa6), –∞ —Ç–∞–∫–∂–µ [—Å—Ç–∞—Ç—å–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `are-the-types-wrong`, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–∏–µ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏](https://github.com/arethetypeswrong/arethetypeswrong.github.io/tree/main/docs/problems).

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Ç–æ—Ä–æ–≥–æ —Ä–∞—É–Ω–¥–∞

–í –Ω–∞—á–∞–ª–µ –∞–ø—Ä–µ–ª—è —è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –∏ `redux@5.0.0-alpha.4`, –∏ `@reduxjs/toolkit@2.0.0-alpha.4` —Å –Ω–∞–±–æ—Ä–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ, –∫–∞–∫ —è –±—ã–ª —É–≤–µ—Ä–µ–Ω, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏":

–í –∏—Ç–æ–≥–µ —è –ø–æ–ª—É—á–∏–ª —Ç–∞–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

-   Redux:

    ```json
    {
        "main": "dist/cjs/redux.cjs",
        "module": "dist/redux.mjs",
        "types": "dist/redux.d.ts",
        "exports": {
            "./package.json": "./package.json",
            ".": {
                "types": "./dist/redux.d.ts",
                "import": "./dist/redux.mjs",
                "default": "./dist/cjs/redux.cjs"
            }
        }
    }
    ```

-   Redux Toolkit:

    ```json
    {
        "module": "dist/redux-toolkit.legacy-esm.js",
        "main": "dist/cjs/index.js",
        "types": "dist/index.d.ts",
        "exports": {
            "./package.json": "./package.json",
            ".": {
                "types": "./dist/index.d.ts",
                "import": "./dist/redux-toolkit.modern.mjs",
                "default": "./dist/cjs/index.js"
            },
            "./query": {
                "types": "./dist/query/index.d.ts",
                "import": "./dist/query/rtk-query.modern.mjs",
                "default": "./dist/query/cjs/index.js"
            },
            "./query/react": {
                "types": "./dist/query/react/index.d.ts",
                "import": "./dist/query/react/rtk-query-react.modern.mjs",
                "default": "./dist/query/react/cjs/index.js"
            }
        }
    }
    ```

–Ø —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∏–ª –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ESM, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –±—Ä–∞—É–∑–µ—Ä, —Ö–æ—Ç—è –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ –æ–Ω–∏ —Ç–∞–º –Ω–µ —É–∫–∞–∑–∞–Ω—ã. (–í–æ–∑–º–æ–∂–Ω–æ, —è –ø–æ–ø—Ä–æ–±—É—é –≤–µ—Ä–Ω—É—Ç—å –∏—Ö –ø–æ–¥ –∫–ª—é—á–∏ `"browser"` –∏–ª–∏ `"unpkg"` - –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è).

–Ø —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª —Ñ–∞–π–ª—ã –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞ `package.json` –≤ –ø–∞–∫–µ—Ç–µ RTK –∫–∞–∫ —á–∞—Å—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Webpack 4.

–≠—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø–æ—Ö–æ–∂–µ, —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–æ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª, —Ö–æ—Ç—è —Å—Ä–µ–¥–∏ –Ω–∏—Ö –∏ –Ω–µ –±—ã–ª–æ –ø—Ä–æ–µ–∫—Ç–∞ React Native.

### –î—Ä—É–≥–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤

–ü–æ–∑–∂–µ —è –ø—Ä–∏–º–µ–Ω–∏–ª —Ç–µ –∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è `reselect@5.0.0-alpha.0`.

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —è –Ω–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª –≤—ã–ø—É—Å–∫–∞—Ç—å –±–æ–ª—å—à—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è React-Redux. –û–¥–Ω–∞–∫–æ, —É–≤–∏–¥–µ–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —è —Ä–µ—à–∏–ª, —á—Ç–æ —Å—Ç–æ–∏—Ç [—Å–¥–µ–ª–∞—Ç—å React-Redux v9.0 major](https://github.com/reduxjs/react-redux/issues/2026), —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–æ–≤ TS –∏–∑ Redux 5 –∏ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∏–º React 18 `useSyncExternalStore` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏ —É –º–µ–Ω—è –±—ã–ª [–æ—Ç–∫—Ä—ã—Ç PR –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–∏ React-Redux](https://github.com/reduxjs/react-redux/pull/2038), –Ω–æ —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Å TS –∏ –Ω–µ –≤–µ—Ä–Ω—É–ª—Å—è –∫ –ø–æ–ø—ã—Ç–∫–∞–º –∏—Ö –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–∏ Immer

–Ø –ø—Ä–æ–≤–µ–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Immer 10 beta –∏ —É–≤–∏–¥–µ–ª, —á—Ç–æ –æ–Ω–∞ —Å—Ç–∞–ª–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ. –û–¥–Ω–∞–∫–æ —è —Ç–∞–∫–∂–µ –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ [–ø–æ—á–µ–º—É-—Ç–æ Immer 10 beta –∫–∞–∂–µ—Ç—Å—è –±–æ–ª—å—à–µ, —á–µ–º Immer 9](https://github.com/immerjs/immer/pull/1028#issuecomment-1494549956). –Ø —Å–Ω–µ—Å [–≤–µ—Ç–∫—É PR Immer 10 beta](https://github.com/immerjs/immer/pull/1028) –∏ –ø—Ä–æ–≤–µ–ª —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–±–æ—Ä–∫–∏.

–ü–æ—Å–ª–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `Map/Set` –≤ Immer —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏ –ú–∏—à–µ–ª—å —Å–æ–≥–ª–∞—Å–∏–ª—Å—è –≤–µ—Ä–Ω—É—Ç—å —ç—Ç–æ, –ø–æ—Å–∫–æ–ª—å–∫—É Redux –≤ —ç—Ç–æ–º –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è, –∞ RTK —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –∫—Ä—É–ø–Ω–µ–π—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Immer. –û–¥–Ω–∞–∫–æ –¥–∞–∂–µ —Å —ç—Ç–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º [–±–µ—Ç–∞-–≤–µ—Ä—Å–∏—è Immer 10 –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±–æ–ª—å—à–µ, —á–µ–º Immer 9](https://github.com/immerjs/immer/pull/1028#issuecomment-1499767135).

–Ø [–ø–æ–∫–æ–ø–∞–ª—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ —Å–±–æ—Ä–∫–∏ Immer](https://github.com/immerjs/immer/pull/1028#issuecomment-1499805247) –∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –æ–Ω–∞ –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –¥–∞–≤–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞–∫–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ `tsdx` –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ES6. –≠—Ç–æ –¥–æ–±–∞–≤–ª—è–ª–æ –∫—É—á—É –ø–æ–ª–∏—Ñ–∏–ª–ª–æ–≤ –∏ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞. –Ø —Ç–∞–∫–∂–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏.

–ü–æ—Å–∫–æ–ª—å–∫—É —è —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª –∫—É—á—É –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–±–æ—Ä–∫–∏ Redux –∏ RTK, —è –≤—ã–∑–≤–∞–ª—Å—è –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –Ω–∞ Immer. –Ø –±—ã—Å—Ç—Ä–æ —Å–æ–±—Ä–∞–ª –ø—Ä–æ–±–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∏ —É–≤–∏–¥–µ–ª –∑–∞–º–µ—Ç–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ Immer. [–Ø —Ä–∞–∑–º–µ—Å—Ç–∏–ª PR –Ω–∞ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Immer](https://github.com/immerjs/immer/pull/1032), –∏ Michel –æ–±—ä–µ–¥–∏–Ω–∏–ª –∏—Ö –≤ v10.

## –ü—Ä–æ–±–ª–µ–º—ã —Å Next.js –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ React Server

–í –Ω–∞—á–∞–ª–µ –º–∞—è –±—ã–ª –≤—ã–ø—É—â–µ–Ω [Next 13.4](https://nextjs.org/blog/next-13-4). –ì–ª–∞–≤–Ω—ã–º —Å–æ–±—ã—Ç–∏–µ–º —Å—Ç–∞–ª–æ —Ç–æ, —á—Ç–æ –Ω–æ–≤—ã–π "App Router", –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö React Server, —Ç–µ–ø–µ—Ä—å —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –≥–æ—Ç–æ–≤—ã–º –∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É. –í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º CLI Next —Å—Ç–∞–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º App Router –∏ –ø–∞–ø–∫–æ–π `/app`, –∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—ã–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞, —á—Ç–æ–±—ã –Ω–∞—É—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å App Router –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React Server –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–í—Å–∫–æ—Ä–µ –Ω–∞ React-Redux –∏ Redux Toolkit –ø–æ—Å—ã–ø–∞–ª–∏—Å—å –Ω–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∂–∞–ª–æ–±–∞–º–∏ –Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É React-Redux. –û—Å–Ω–æ–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –±—ã–ª–∏ –æ—à–∏–±–∫–∏, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ `React.createContext()` –±—ã–ª —Ä–∞–≤–µ–Ω null –∏–ª–∏ `useLayoutEffect` –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –≤ —Å—Ä–µ–¥–µ RSC.

–¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º –º–æ–π —Å–æ—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ Redux [Lenz Weber-Tronic](https://twitter.com/phry), –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ Apollo Client –Ω–∞ —Å–≤–æ–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ, –ø—Ä–æ–≤–µ–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–∞—Ä—É –º–µ—Å—è—Ü–µ–≤, –∏–∑—É—á–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ —Å RSC.

–û–¥–Ω–∞ –∏–∑ –ø—Ä–æ–±–ª–µ–º, —Å –∫–æ—Ç–æ—Ä–æ–π –æ–Ω —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è, –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `createApi` RTK Query, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö—É–∫–∏ React, –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –∏ –æ–Ω [–ø–æ–¥–∞–ª –∑–∞–ø—Ä–æ—Å –≤ React —Å –ø—Ä–æ—Å—å–±–æ–π –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —Å —ç—Ç–∏–º —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è](https://github.com/facebook/react/issues/26460).

–û–Ω —Ç–∞–∫–∂–µ –Ω–∞–ø–∏—Å–∞–ª [–¥–ª–∏–Ω–Ω—ã–π RFC –æ —Ç–æ–º, –∫–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Apollo –∏ Next 13](https://github.com/apollographql/apollo-client-nextjs/pull/9), —á—Ç–æ –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –ø—Ä–∏–≤–µ–ª–æ –∫ [–ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ Apollo + Next interop](https://www.apollographql.com/blog/announcement/frontend/using-apollo-client-with-next-js-13-releasing-an-official-library-to-support-the-app-router/).

–í —Å–µ—Ä–µ–¥–∏–Ω–µ –∏—é–Ω—è –æ–¥–∏–Ω –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Apollo –æ–±—Ä–∞—Ç–∏–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ–æ–±—â–∞–ª–æ—Å—å, —á—Ç–æ [Apollo –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Next 13.4.6-canary.2](https://github.com/apollographql/apollo-client/issues/10974). –í—Å–∫–æ—Ä–µ —ç—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –¥—Ä—É–≥–æ–π —Å–±–æ—Ä–∫–µ canary, –Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤—ã–∑–≤–∞–ª–∞ –¥–æ–ª–≥—É—é –∏ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–Ω—É—é –¥–∏—Å–∫—É—Å—Å–∏—é.

–í —ç—Ç–æ–π —Ç–µ–º–µ –æ–¥–∏–Ω –∏–∑ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Next —Å–æ–æ–±—â–∏–ª, —á—Ç–æ [Next —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç ESM](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1593076110), —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–µ—Ç –ª—É—á—à–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–µ, –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞ –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ç–µ–ø–µ—Ä—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π. –û–Ω–∏ —É–ø–æ–º—è–Ω—É–ª–∏: "–ï—Å–ª–∏ apollo client –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ä–µ—à–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, —Ç–æ –µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ `"react-server"`, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã".

–ü—Ä–æ—á–∏—Ç–∞–≤ —ç—Ç–æ, —è –≤–º–µ—à–∞–ª—Å—è –∏ –æ—Ç–º–µ—Ç–∏–ª, —á—Ç–æ [RTK Query —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–º–µ—Å—å –∫–∞–∫ UI-–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ, —Ç–∞–∫ –∏ –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ —Ö—É–∫–∞—Ö React –∫–æ–¥–∞, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞—Ö–æ—Ç–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `createApi` –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1593344051). –Ø —Ç–∞–∫–∂–µ —É–∫–∞–∑–∞–ª, —á—Ç–æ [–º—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã RTK](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1593362951), –∏ —è –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –µ—â–µ –±–æ–ª—å—à–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∏—Ö, —á—Ç–æ–±—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç—å —ç—Ç–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º, –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã–º Next/RSC.

–°–µ–± –ú–∞—Ä–∫–±–∞–¥–∂, –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–π –≤–µ–¥—É—â–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –∫–æ–º–∞–Ω–¥—ã React (–∞ —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞–¥ Next –≤ Vercel), –æ—Ç–≤–µ—Ç–∏–ª: ["–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∞—à–µ–≥–æ api –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ api, –µ—Å–ª–∏ –≤—ã –æ–ø—É–±–ª–∏–∫—É–µ—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∏—Å–∫–ª—é—á–∞—é—â—É—é –Ω–µ–Ω—É–∂–Ω—ã–µ –≤–µ—Ç–≤–∏ –∫–æ–¥–∞"](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1594629572).

–≠—Ç–æ –≤—ã–∑–≤–∞–ª–æ –±—É—Ä–Ω—É—é –¥–∏—Å–∫—É—Å—Å–∏—é. –õ–µ–Ω—Ü –æ—Ç–º–µ—Ç–∏–ª, —á—Ç–æ [—ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤–Ω–µ—Å—Ç–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —É–ø–∞–∫–æ–≤–∫—É](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1594645646), —Ç–µ–º –±–æ–ª–µ–µ —á—Ç–æ [–º–Ω–æ–≥–∏–µ –ø–∞–∫–µ—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ Apollo, –¥–æ —Å–∏—Ö –ø–æ—Ä –Ω–µ –∏–º–µ—é—Ç –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ `"exports"`](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1594680297). –≠—Ç–æ, –ø–æ—Ö–æ–∂–µ, —É–¥–∏–≤–∏–ª–æ –°–µ–±–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ª–æ–∂–∏–ª [–Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ö–∞–∫–µ—Ä—Å–∫–∏–π –æ–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å `import * as React`](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1594746276), —á—Ç–æ–±—ã –æ–±–º–∞–Ω—É—Ç—å –∏—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä.

–Ø –±—ã–ª –∫—Ä–∞–π–Ω–µ —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω, —á–∏—Ç–∞—è —ç—Ç–æ—Ç –æ–±–º–µ–Ω –º–Ω–µ–Ω–∏—è–º–∏, –∏ –æ—Ç–≤–µ—Ç–∏–ª: ["–Ø –ø–æ—Ç—Ä–∞—Ç–∏–ª –º–µ—Å—è—Ü—ã, –ø—ã—Ç–∞—è—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—à—É —É–ø–∞–∫–æ–≤–∫—É, –∞ —Ç–µ–ø–µ—Ä—å –≤—ã –≥–æ–≤–æ—Ä–∏—Ç–µ –º–Ω–µ, —á—Ç–æ —è –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å –µ—â–µ –±–æ–ª—å—à–µ —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞—à –∫–æ–¥ –Ω–µ –ª–æ–º–∞–ª—Å—è –≤ RSC-—Å—Ä–µ–¥–∞—Ö. –≠—Ç–æ –æ—á–µ–Ω—å –¥–µ–º–æ—Ä–∞–ª–∏–∑—É–µ—Ç"](https://github.com/apollographql/apollo-client/issues/10974#issuecomment-1594894341).

–†–∞–∑–≥–æ–≤–æ—Ä –≤ —ç—Ç–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–µ–º–µ —É—Ç–∏—Ö, –Ω–æ —Å–æ–≤–ø–∞–ª —Å —Ü–µ–ª—ã–º —Ä—è–¥–æ–º –¥–∏—Å–∫—É—Å—Å–∏–æ–Ω–Ω—ã—Ö —Ç–µ–º –æ RSC –≤ Twitter –∏ Reddit.

–°–ø—É—Å—Ç—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å –õ–µ–Ω—Ü –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –æ–±—à–∏—Ä–Ω—É—é –∑–∞–º–µ—Ç–∫—É –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [–ú–æ–µ –º–Ω–µ–Ω–∏–µ –æ —Ç–µ–∫—É—â–∏—Ö —Å–ø–æ—Ä–∞—Ö –≤–æ–∫—Ä—É–≥ React & Server Components](https://phryneas.de/react-server-components-controversy). –í –Ω–µ–º –æ–Ω –æ—Ç–º–µ—Ç–∏–ª, —á—Ç–æ –º—ã —Å—á–∏—Ç–∞–µ–º RSC –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–µ–π, –Ω–æ:

-   –ù–∞–º —Å—Ç–∞–ª–æ –≥–æ—Ä–∞–∑–¥–æ —Å–ª–æ–∂–Ω–µ–µ –ø–æ–º–æ–≥–∞—Ç—å –Ω–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∏ –æ–Ω–∏ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
-   –¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ –æ React (–∏ Next)
-   –¢–µ–ø–µ—Ä—å –≥–æ—Ä–∞–∑–¥–æ —Å–ª–æ–∂–Ω–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å React
-   –°–æ–∑–¥–∞–µ—Ç—Å—è –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ React –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ RSC –∏ —Ö—É–∫–∞ `use`, –∏ –º–∞–ª–æ –æ–±—Å—É–∂–¥–∞–µ—Ç, –∫–∞–∫ —ç—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —ç–∫–æ—Å–∏—Å—Ç–µ–º—É.

–û–Ω —Ç–∞–∫–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏–ª —Ä—è–¥ –≤–æ–∑–º–æ–∂–Ω—ã—Ö API, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º RSC –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.

–°–æ–æ–±—â–µ–Ω–∏–µ –õ–µ–Ω—Ü–∞ –ø–æ–ª—É—á–∏–ª–æ [–º–Ω–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤](https://twitter.com/phry/status/1676691019994112004) –æ—Ç –ª—é–¥–µ–π, —Å–æ–≥–ª–∞—Å–Ω—ã—Ö —Å –ø–µ—Ä–µ—á–Ω–µ–º –ø—Ä–æ–±–ª–µ–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –≤—ã—Ä–∞–∂–∞—é—â–∏—Ö —Å–æ—á—É–≤—Å—Ç–≤–∏–µ.

–ú—ã —Ç–∞–∫ –∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –Ω–∏–∫–∞–∫–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∫–æ–º–∞–Ω–¥—ã React –ø–æ –ø–æ–≤–æ–¥—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ API –∏–ª–∏ –ø–æ –ø–æ–≤–æ–¥—É —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—é—â–∏–µ —Å RSC. –Ø –ø–æ–ª—É—á–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ª—é–¥–µ–π –∏–∑ React org, –∫–æ—Ç–æ—Ä—ã–µ –ø—ã—Ç–∞—é—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ RSC, –∏ —Å–º–æ–≥ –ø–µ—Ä–µ–¥–∞—Ç—å –∏–º –º–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–æ–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –ø–æ RSC, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É –∏ –ø—Ä–æ–±–ª–µ–º–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö Next –ø–æ—è–≤–∏–ª–∞—Å—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –ø–æ—Å–≤—è—â–µ–Ω–Ω–∞—è [—Ç–æ–º—É, –∫–∞–∫ –æ–±–µ—Ä–Ω—É—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é `"use client"`](https://nextjs.org/docs/getting-started/react-essentials#rendering-third-party-context-providers-in-server-components), —Ö–æ—Ç—è —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –Ω–µ–±–æ–ª—å—à–æ–π –ø–ª–∞—Å—Ç—ã—Ä—å.

## –í—ã–ø—É—Å–∫ –ø–∞—Ä–∞

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —è –ø–æ—Ç—Ä–∞—Ç–∏–ª —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —è —Å—Ç–∞–ª –¥–æ–≤–æ–ª—å–Ω–æ —Å–∏–ª—å–Ω–æ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞ –æ–≥—Ä–æ–º–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–µ—â–µ–π, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º–∏ –º–Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å —Å–ª–µ–¥–∏—Ç—å.

[–í –∫–æ–Ω—Ü–µ –∞–ø—Ä–µ–ª—è —è –Ω–∞–ø–∏—Å–∞–ª –≤ —Ç–≤–∏—Ç—Ç–µ—Ä–µ](https://twitter.com/acemarke/status/1652021889307496448):

!!!note ""

    –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –≤ –≤–∏–¥—É –ø—Ä–∏ –∏–∑–¥–∞–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ 2023 –≥–æ–¥—É:

    -   –§–æ—Ä–º–∞—Ç—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ (ESM, CJS, UMD)
    	-   –ú–∞—Ç—Ä–∏—Ü–∞ —Å: —Å–±–æ—Ä–∫–∞–º–∏ `dev/prod/NODE_ENV`
    -   –ü–∞–∫–µ—Ç–Ω—ã–µ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `.js` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    -   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `exports`
    -   –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Webpack 4
    -   –û–ø—Ü–∏–∏ TS `moduleResolution`
    -   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ä–µ–¥—ã
    -   –†–∞–∑–ª–∏—á–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –º–µ–∂–¥—É –±–∞–Ω–¥–ª–µ—Ä–∞–º–∏
    -   –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —É–∑–ª–∞ ESM/CJS
    -   –í—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ TS (–ø–∞–∫–µ—Ç–Ω—ã–π? –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π? `.d.ts`, –∏–ª–∏ `.d.mts`?)
    -   Edge runtimes?
    -   –ê —Ç–µ–ø–µ—Ä—å –µ—â–µ –∏ –Ω–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è React `"use client"` –∏ RSC.
    -   –ò –≤—Å–µ —ç—Ç–æ –¥–ª—è upstream deps.

    –≠—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–ª–µ–ø—ã–º :(

    –Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –∫—Ç–æ-—Ç–æ —Å–º–æ–∂–µ—Ç —É—Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Å–µ–º–∏ —ç—Ç–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫—Ä–∞–π–Ω–∏–º–∏ —Å–ª—É—á–∞—è–º–∏, —Å—Ä–µ–¥–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏.

    –ò –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —Ç–æ–º—É, –∫–∞–∫ –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞—Ç—å. –í—Å–µ –∑–∞–Ω–∏–º–∞—é—Ç—Å—è –∫–∞—Ä–≥–æ-–∫—É–ª—å—Ç–∏–∑–º–æ–º —É –¥—Ä—É–≥–∏—Ö.

    –Ø —Å—Ç–∞—Ä–∞—é—Å—å –ø–æ—Å—Ç—É–ø–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –Ω–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ä–µ–¥, –Ω–æ —ç—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç.

    **–ß—É–¥–æ, —á—Ç–æ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –≤ —ç—Ç–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ –≤–æ–æ–±—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.**

–≠—Ç–æ –∑–∞–¥–µ–ª–æ –∑–∞ –∂–∏–≤–æ–µ. –≠—Ç–æ—Ç —Ç–≤–∏—Ç —Å—Ç–∞–ª –¥–æ–≤–æ–ª—å–Ω–æ –≤–∏—Ä—É—Å–Ω—ã–º (–¥–ª—è –º–µ–Ω—è), –ø–æ–ª—É—á–∏–≤ –¥–µ—Å—è—Ç–∫–∏ —Ä–µ—Ç–≤–∏—Ç–æ–≤, —Ü–∏—Ç–∞—Ç –∏ –æ—Ç–≤–µ—Ç–æ–≤. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–∞ –Ω–µ–≥–æ –ø–æ—è–≤–∏–ª–∏—Å—å —Å—Å—ã–ª–∫–∏ –≤ [–Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞—Å—Å—ã–ª–∫–∞—Ö](https://javascriptweekly.com/issues/637).

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —è –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ —Ç–æ–º, —á—Ç–æ "—á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –¥–µ–º–æ—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º" –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ RSC, —è –ø–æ—Å–ª–µ–¥–æ–≤–∞–ª –∑–∞ –Ω–∏–º [–µ—â–µ –æ–¥–∏–Ω —Ç–≤–∏—Ç, —Å–≤—è–∑—ã–≤–∞—é—â–∏–π –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –∏ –æ—Ç–¥—É—à–∏–Ω—É](https://twitter.com/acemarke/status/1669733564378673152):

!!!note ""

    –ö–∞–∫ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ React, —è –æ—á–µ–Ω—å —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å –∏–∑-–∑–∞ –≤–æ–∑–Ω–∏ –≤–æ–∫—Ä—É–≥ React Server Components.

    –Ø –Ω–∞—á–∏–Ω–∞—é —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è, —á—Ç–æ –∑–∞—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç–æ—è—Ç —Ç–æ–π –±–æ–ª–∏, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–∏—á–∏–Ω—è—é—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫.

–≠—Ç–æ—Ç —Ç–≤–∏—Ç —Ç–∞–∫–∂–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª—Å—è –¥–æ–≤–æ–ª—å–Ω–æ —à–∏—Ä–æ–∫–æ –∏ –≤—ã–∑–≤–∞–ª –º–Ω–æ–≥–æ –æ—Ç–∫–ª–∏–∫–æ–≤.

–ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π [—É –º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∞ —Å–ª–µ–¥—É—é—â–∞—è –º—ã—Å–ª—å](https://twitter.com/acemarke/status/1669808482915057664):

!!!note ""

    –Ø –Ω–∞—Ö–æ–∂—É –∏—Ä–æ–Ω–∏—é –≤ —Ç–æ–º, —á—Ç–æ –æ–±–∞ –º–æ–∏—Ö –Ω–µ–¥–∞–≤–Ω–∏—Ö —Ç–≤–∏—Ç–∞, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã—Ö —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏—è–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã JS –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–µ–≥–æ –ª–∏–± (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤, RSCs), —Å—Ç–∞–ª–∏ –≤–∏—Ä—É—Å–Ω—ã–º–∏.

    –û–±—ã—á–Ω–æ —è —Å—Ç–∞—Ä–∞—é—Å—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π –∏ –Ω–µ –≤—ã—Å–∫–∞–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∞ –ø—É–±–ª–∏—á–Ω–æ.

    –ü–æ–ª–∞–≥–∞—é, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ª—é–¥–∏ —á—É–≤—Å—Ç–≤—É—é—Ç –∏–ª–∏ —Å–æ—á—É–≤—Å—Ç–≤—É—é—Ç —ç—Ç–∏–º —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏—è–º.

–í –æ–¥–Ω–æ–º –∏–∑ –æ—Ç–∑—ã–≤–æ–≤ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è: "–Ø –¥—É–º–∞—é, –ª—é–¥–∏ –∑–Ω–∞—é—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ —Ç–æ–º—É, —á—Ç–æ –¥–µ–ª–∞–µ—Ç–µ, –∏ –∫ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ. –ï—Å–ª–∏ –≤–∞—Å —á—Ç–æ-—Ç–æ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –∑–Ω–∞—á–∏—Ç, —á—Ç–æ-—Ç–æ –ë–û–õ–¨–®–û–ï –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ".

## –ó–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ –º—ã—Å–ª–∏

–û–±—ã—á–Ω–æ —è –ª—é–±–ª—é –ø–∏—Å–∞—Ç—å –ø–æ–¥–æ–±–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —Ä–µ–ª–∏–∑–∞ –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –∏—Å—Ç–æ—Ä–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∏ –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤—ã–≤–æ–¥—ã –∏ –æ—Ç–≤–µ—Ç—ã, –æ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å. –ë—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ, –µ—Å–ª–∏ –±—ã —è –º–æ–≥ —Å–∫–∞–∑–∞—Ç—å: "–≠–π, RTK 2.0 –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω, –∏ –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–∞–±–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —É–ø–∞–∫–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ, –∫–∞–∫ —è –∑–Ω–∞—é, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ".

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ –Ω–µ —Ç–∞–∫.

–≠—Ç–æ –±—ã–ª–æ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω–æ–µ –ª–µ—Ç–æ –¥–ª—è –º–µ–Ω—è - –∏ —Ä–∞–±–æ—Ç–∞, –∏ Redux, –∏ –ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è, –∏ —è –ø–æ–Ω—è–ª, —á—Ç–æ –∏–º–µ—é –¥–µ–ª–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –≤—ã–≥–æ—Ä–∞–Ω–∏–µ–º. –ù–æ, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —è –Ω–∞—á–∞–ª —ç—Ç–æ—Ç –ø–æ—Å—Ç –≤ –Ω–∞—á–∞–ª–µ –∏—é–Ω—è, –≤–µ—Ä–Ω—É–≤—à–∏—Å—å —Å React Summit, –∏ —Ç–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å, —Å–ø—É—Å—Ç—è –ø–∞—Ä—É –º–µ—Å—è—Ü–µ–≤, –≤–µ—Ä–Ω—É–ª—Å—è –∫ –Ω–µ–º—É, —á—Ç–æ–±—ã –∑–∞–∫–æ–Ω—á–∏—Ç—å.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–≥–æ–¥–Ω—è?

–í–æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–ª –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å:

-   [Redux Toolkit 2.0.0-beta.0](https://github.com/reduxjs/redux-toolkit/releases/tag/v2.0.0-beta.0) –∏ [Redux 5.0.0-beta.0](https://github.com/reduxjs/redux/releases/tag/v5.0.0-beta.0) —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã, —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø–∞–∫–µ—Ç–æ–º ESM/CJS (–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥—Ä—É–≥–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ç–∏–ø–æ–≤ TS)
    -   [Reselect 5.0.0-alpha.2](https://github.com/reduxjs/reselect/releases/tag/v5.0.0-alpha.2) –∏ [Redux-Thunk 3.0.0-alpha.3](https://github.com/reduxjs/redux-thunk/releases/tag/v3.0.0-alpha.3) —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã, —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ —É–ø–∞–∫–æ–≤–∫–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏.
-   –£ –º–µ–Ω—è –µ—Å—Ç—å [WIP PR –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —É–ø–∞–∫–æ–≤–∫–∏ React-Redux –¥–ª—è v9](https://github.com/reduxjs/react-redux/pull/2038), –Ω–æ –∞–ª—å—Ñ–∞-—Ä–µ–ª–∏–∑–∞ —Å —ç—Ç–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ø–æ–∫–∞ –Ω–µ—Ç.
    -   Lenz —Ä–∞–±–æ—Ç–∞–ª –Ω–∞–¥ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Context –≤ React-Redux, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ–ª–æ–º–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ RSC. –ü–µ—Ä–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ –≤—ã–ø—É—â–µ–Ω—ã –≤ [v8.1.0](https://github.com/reduxjs/react-redux/releases/tag/v8.1.0), –∑–∞—Ç–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞–ª–∏ –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ [v8.1.1](https://github.com/reduxjs/react-redux/releases/tag/v8.1.1) –∏ [v8.1.2](https://github.com/reduxjs/react-redux/releases/tag/v8.1.2).
-   –ü–∞–∫–µ—Ç—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É `are-the-types-wrong`, –Ω–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤—ã–¥–∞—é—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ `"FalseCJS"`. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤ [RTK 2.0 beta –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É—Ç–∏ TS, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—Å—Ç–∏—Ç—å](https://arethetypeswrong.github.io/?p=%40reduxjs%2Ftoolkit%402.0.0-beta.0).
-   –ü–æ–º–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º, —É –Ω–∞—Å –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å RSC –∏–ª–∏ –ø–ª–∞–Ω–æ–≤ –ø–æ —Ä–∞–±–æ—Ç–µ –Ω–∞–¥ —á–µ–º-–ª–∏–±–æ –∑–Ω–∞—á–∏–º—ã–º –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏.

### –£—Ä–æ–∫–∏ –∏ –≤—ã–≤–æ–¥—ã

–Ø –º–Ω–æ–≥–æ —Ä–∞–∑ –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ –º–Ω–µ –¥–æ —Å–∏—Ö –ø–æ—Ä –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —è –ø–æ—á—Ç–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞—é –ø–æ —Ç–µ–º–µ —É–ø–∞–∫–æ–≤–∫–∏ –º–æ–¥—É–ª–µ–π –∏ —Ç–∏–ø–æ–≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–π. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –∂–µ —è –ø–æ–ª–∞–≥–∞—é, —á—Ç–æ –∑–Ω–∞—é –±–æ–ª—å—à–µ, —á–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ JS-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –º–Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –ø—ã—Ç–∞—è—Å—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —ç—Ç–æ–º –≤–æ–ø—Ä–æ—Å–µ (–∫–∞–∫ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –º–Ω–æ–≥–∏—Ö –ª–µ—Ç, —Ç–∞–∫ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ —ç—Ç–æ–º –≥–æ–¥—É). –ù–æ, —É—á–∏—Ç—ã–≤–∞—è –±–µ–∑—É–º–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è—é—â–∏–π—Å—è —Å–ø–∏—Å–æ–∫ —Ç–æ–≥–æ, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, —è –¥—É–º–∞—é, –≤–ø–æ–ª–Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ —è –≤—Å–µ –µ—â–µ —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ–≤–µ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–∞–º–æ–∑–≤–∞–Ω—Ü–µ–º –≤–æ –≤—Å–µ—Ö —ç—Ç–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö.

–ò—Ç–∞–∫, —á—Ç–æ –∂–µ —è —É–∑–Ω–∞–ª –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?

-   –£ –º–µ–Ω—è –µ—Å—Ç—å –Ω–∞–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ, –ø–æ—Ö–æ–∂–µ, —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –±–∞–Ω–¥–ª–µ—Ä–æ–≤ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏, –∏, –ø–æ—Ö–æ–∂–µ, –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —É–ø–∞–∫–æ–≤–∫—É ESM/CJS
-   –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–∏–ø–∏–∑–∞—Ü–∏–π TS –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—â–µ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.
-   –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ JS –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å—é –Ω–∞–ª–∏—á–∏—è `".js"` –≤ –∏–º–ø–æ—Ä—Ç–µ —Ñ–∞–π–ª–æ–≤, –∏, –ø–æ—Ö–æ–∂–µ, –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π...
-   –ù–æ –∑–∞—Ç–µ–º –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—Ä—É–≥–∏–º –ø—Ä–æ–±–ª–µ–º–∞–º, –∫–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ RSC".
-   –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É—Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Å–µ–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è—é—Ç—Å—è
    -   –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ –∏ –∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ï—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—Å—É—Ä—Å—ã ([—Ç–∞–±–ª–∏—Ü–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è Sokra](https://sokra.github.io/interop-test/), [—ç—Ç–∞ —Å—Ç–∞—Ç—å—è —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –æ bundler](https://reaper.is/writing/20220418-the-esm-cjs-problem), [—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç –î–∂–µ–π—Å–æ–Ω–∞ –ú–∏–ª–ª–µ—Ä–∞](https://docs.google.com/spreadsheets/d/1VzemJcrAerkMyw17VZo3uAODbC4dmRUgbc2_jXuveCQ/edit#gid=0) –∏ —Ç.–¥.), –Ω–æ –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, —á—Ç–æ–±—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±—ã–ª–∏ –¥–æ–≤–æ–ª—å–Ω—ã.
-   –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–æ—Å—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö, –≤—Å–µ–æ–±—ä–µ–º–ª—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤. –Ø –Ω–∞—à–µ–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ—Å—Ç–æ–π–Ω—ã—Ö —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, [The Modern Guide to Packaging Your JS Library](https://github.com/frehner/modern-guide-to-packaging-js-library), [The React Library Guide (draft)](https://github.com/advename/The-React-Library-guide) –∏ [Publishing Modern JS](https://web.dev/publish-modern-javascript/)), –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –º–Ω–æ–≥–∏–µ –∑–Ω–∞–Ω–∏—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ä–Ω—ã, —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã. –û—Å–æ–±–µ–Ω–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–æ–º—É, –∫–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–∞–∫–µ—Ç–æ–≤ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å–ª–µ–¥—É–µ—Ç –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
-   –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ –æ—Ç—á–∞—è–Ω–Ω–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –±–æ–ª–µ–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö, –ø–æ–∑–≤–æ–ª—è—é—â–∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å.
    -   –ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ `tsup` –¥–æ–≤–æ–ª—å–Ω–æ —Ö–æ—Ä–æ—à, –∏ —è –≤–∏–¥–µ–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É—Ç–≤–µ—Ä–∂–¥–∞—é—Ç, —á—Ç–æ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–≤–æ–π–Ω—ã–µ –ø–∞–∫–µ—Ç—ã ESM/CJS, –Ω–æ —è –Ω–µ –ø—Ä–æ–±–æ–≤–∞–ª, –Ω–æ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ–µ –∏–∑ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å.
    -   –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –µ—Å—Ç—å –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º –Ω–µ–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç "test-your-lib-against-a-range-of-build-tools As A Service". –Ø –Ω–∞—Å—Ç—Ä–æ–∏–ª –∫—É—á—É –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ Redux —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Å–±–æ—Ä–∫–∏, –∏ —è –≤–∏–¥–µ–ª, —á—Ç–æ `react-aria` –¥–µ–ª–∞–µ—Ç –Ω–µ—á—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ, –Ω–æ —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ—Ç —Ç–∏–ø –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –∫–∞–∫-—Ç–æ –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–º–æ—á—å –∞–≤—Ç–æ—Ä–∞–º –ª–∏–± –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Ö –ø–∞–∫–µ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ –≤—Å–µ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.
-   React Server Components - —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–æ –µ—Å—Ç—å –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ —Å–µ—Ä—å–µ–∑–Ω–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–ª–æ–º–∞–µ—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã. –Ø –ø–æ–Ω–∏–º–∞—é –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–æ–º–∞–Ω–¥—ã React –æ —Ç–æ–º, —á—Ç–æ "–Ω–∏—á–µ–≥–æ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º React –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –≤—Å–µ —ç—Ç–æ –∞–¥–¥–∏—Ç–∏–≤–Ω–æ"... –Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è —ç—Ç–æ –æ–≥—Ä–æ–º–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —É–º—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–∏–¥–µ—Ç—Å—è –∏–º–µ—Ç—å –¥–µ–ª–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —Ç–∞–∫ –∏ –∞–≤—Ç–æ—Ä–∞–º –ª–∏–±.
    -   –ö–æ–º–∞–Ω–¥–∞ React –Ω–µ –ø—Ä–æ–≤–æ–¥–∏–ª–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∫–∞–∫–æ–π —Ä–∞–∑—ä—è—Å–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫ –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞–∫–µ—Ç–∞–º–∏ –∏ RSC. –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏ —Ä–∞–¥–∏ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ —É –Ω–∞—Å –±—ã–ª —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –î—ç–Ω–æ–º+–≠–Ω–¥—Ä—é, –î—ç–Ω –æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å RFC –õ–µ–Ω—Ü–∞, –∏ –±—ã–ª–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤ —Ç–µ–º–∞—Ö. –ù–æ –Ω–µ –±—ã–ª–æ –Ω–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ Next –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–∏ —Ç–∞–±–ª–∏—Ü—ã "—á—Ç–æ –µ—Å—Ç—å –≤ –∫–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–∏ canary?", –Ω–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –ø–æ—Å—Ç–∞ –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ç–∏–ø–∞ "—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤ lib –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å RSC".
-   –í —Ü–µ–ª–æ–º –ø–µ—Ä–µ—Ö–æ–¥ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã CJS/ESM –±—ã–ª –¥–æ–ª–≥–∏–º –∏ –Ω–µ–ø—Ä–µ–∫—Ä–∞—â–∞—é—â–∏–º—Å—è –∫–æ—à–º–∞—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π, —Å—É–¥—è –ø–æ –≤—Å–µ–º—É, –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. –°–æ–≤—Å–µ–º –Ω–µ–¥–∞–≤–Ω–æ —è —É–≤–∏–¥–µ–ª –ø–∞—Ä—É –¥—É—ç–ª—å–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É—Ç–≤–µ—Ä–∂–¥–∞–ª–æ—Å—å ["CJS –≤—Ä–µ–¥–∏—Ç JavaScript"](https://deno.com/blog/commonjs-is-hurting-javascript) –∏ ["CommonJS –Ω–µ —É–π–¥–µ—Ç"](https://bun.sh/blog/commonjs-is-not-going-away). –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å –Ω–∞–º–∏ –Ω–∞ –¥–æ–ª–≥–∏–µ –≥–æ–¥—ã.

### –ë—É–¥—É—â–∏–µ —à–∞–≥–∏

–ù–∞–º –µ—â–µ –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å Redux Toolkit 2.0, –Ω–æ —ç—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ–º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–æ—Å—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ –≤—Å–µ –ø–∞–∫–µ—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤ —É–ø–∞–∫–æ–≤–∫–µ, –∏–º–µ—é—Ç –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–µ—Ä—Å–∏–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∏ —á—Ç–æ –≤—Å–µ —Ç–∏–ø—ã TS —Ä–∞–±–æ—Ç–∞—é—Ç, –æ—Ç–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –í–µ—Ä–æ—è—Ç–Ω–æ, –Ω–∞–º –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –∏ –¥—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–æ–¥–æ–º, –Ω–æ —É –Ω–∞—Å –Ω–µ—Ç —á–µ—Ç–∫–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ –µ—â–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —ç—Ç–æ–º –Ω–∞–±–æ—Ä–µ –º–µ–π–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—Å–µ –º—ã, —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–µ, –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π, –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π, –≤—Ä–µ–º–µ–Ω–µ–º –∏ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω—å—é, –∏ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ Redux –¥–ª—è –Ω–∞—Å —Å–µ–π—á–∞—Å –º–µ–Ω–µ–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞.

–ü–æ–∫–∞ —á—Ç–æ —ç—Ç–æ –±—ã–ª –∏–∑–Ω—É—Ä–∏—Ç–µ–ª—å–Ω—ã–π –≥–æ–¥, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–æ –≤—Å–µ–º–∏ —ç—Ç–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏. –ú—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–∞–º–µ—Ä–µ–Ω—ã –≤—ã–ø—É—Å—Ç–∏—Ç—å —Ä—è–¥ –∫—Ä—É–ø–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤ (—Å–æ –≤—Ä–µ–º–µ–Ω–µ–º - –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–∏–∫–∞–∫–∏—Ö –æ–±–µ—â–∞–Ω–∏–π –ø–æ —Å—Ä–æ–∫–∞–º), –∏ —è –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ —ç—Ç–∏ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –±—É–¥—É—Ç –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

**–Ø –æ—á–µ–Ω—å –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –≤—Å–µ —ç—Ç–æ –≤—Ä–µ–º—è –∏ —É—Å–∏–ª–∏—è –±—É–¥—É—Ç —Å—Ç–æ–∏—Ç—å —Ç–æ–≥–æ.**

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

-   –ò—Å—Ç–æ—Ä–∏—è –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ES-–º–æ–¥—É–ª–µ–π
    -   [Gist: ES Modules - History and Future](https://gist.github.com/jkrems/769a8cd8806f7f57903b641c74b5f08a) (—Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π –∏ –∑–∞–º–µ—Ç–∫–∏ TC39)
    -   [Node API reference: Packages](https://nodejsdev.ru/api/packages/)
    -   [Packages: the "Dual-Package Hazard" problem](https://nodejsdev.ru/api/packages/#commonjses)
    -   [Node API Reference: ECMAScript Modules](https://nodejsdev.ru/api/esm/)
    -   Andrew Branch's [WIP TypeScript module processing documentation](https://gist.github.com/andrewbranch/79f872a8b9f0507c9c5f2641cfb3efa6)
-   ESM/CJS Debates
    -   [Sindre Sorhus: Pure ESM packages](https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c)
    -   [ES-–º–æ–¥—É–ª–∏ —É–∂–∞—Å–Ω—ã, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ](https://gist.github.com/joepie91/bca2fda868c1e8b2c2caf76af7dfcad3)
    -   [CommonJS –≤—Ä–µ–¥–∏—Ç JavaScript](https://deno.com/blog/commonjs-is-hurting-javascript)
    -   [CommonJS –Ω–µ –∏—Å—á–µ–∑–Ω–µ—Ç](https://bun.sh/blog/commonjs-is-not-going-away)
-   –†–µ—Å—É—Ä—Å—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤
    -   [–û–±—Å—É–∂–¥–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Redux Toolkit ESM/TS (–ú–∞—Ç–µ—É—à –ë—É—Ä–∂–∏–Ω—Å–∫–∏ –∏ –≠–Ω–¥—Ä—é –ë—Ä–∞–Ω—á)](https://gist.github.com/markerikson/42d55b0fd970449fc5d84263f4775cbd)
    -   [The Modern Guide to Packaging Your JS Library](https://github.com/frehner/modern-guide-to-packaging-js-library)
    -   [The React Library Guide (draft)](https://github.com/advename/The-React-Library-guide)
    -   [A NodeJS Dual Module Deep Dive](https://webreflection.medium.com/a-nodejs-dual-module-deep-dive-8f94ff56210e)
    -   [Ship ESM & CJS In One Package](https://antfu.me/posts/publish-esm-and-cjs)
    -   [–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ ES-–º–æ–¥—É–ª–µ–π —Å –ø–æ–º–æ—â—å—é –ø–∞–∫–µ—Ç–æ–≤](https://2ality.com/2022/01/esm-specifiers.html)
    -   [Configuring CommonJS & ES Modules for Node.js](https://dev.to/jakobjingleheimer/configuring-commonjs-es-modules-for-nodejs-12ed#esm-source-and-both-cjs-amp-esm-distribution)
    -   [–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π NPM-–º–æ–¥—É–ª—å –¥–ª—è ESM –∏ CommonJS](https://www.sensedeep.com/blog/posts/2021/how-to-create-single-source-npm-module.html)
    -   [The ESM and CJS Problem](https://reaper.is/writing/20220418-the-esm-cjs-problem)
    -   [–ü–æ–¥–¥–µ—Ä–∂–∫–∞ CommonJS –∏ ESM —Å –ø–æ–º–æ—â—å—é TypeScript –∏ Node](https://evertpot.com/universal-commonjs-esm-typescript-packages/)
-   –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    -   [`tsup`](https://tsup.egoist.dev/)
    -   [Are The Types Wrong?](https://arethetypeswrong.github.io/)
    -   [Publint](https://publint.dev/)
    -   [Preconstruct](https://preconstruct.tools/)
    -   [`release-it`](https://github.com/release-it/release-it)
    -   [`yalc`](https://www.npmjs.com/package/yalc)
    -   [–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ RTK CI –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å–±–æ—Ä–∫–∏](https://github.com/reduxjs/redux-toolkit/tree/32e90810b8e4a7b9f274d47bc8cdad8776398947/examples/publish-ci) –∏ [–†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å CI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–∞](https://github.com/reduxjs/redux-toolkit/blob/32e90810b8e4a7b9f274d47bc8cdad8776398947/.github/workflows/tests.yml#L143-L205)

## –°—Å—ã–ª–∫–∏

-   [Blogged Answers: My Experience Modernizing Packages to ESM](https://blog.isquaredsoftware.com/2023/08/esm-modernization-lessons/)
