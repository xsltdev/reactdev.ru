# useCallback

**`useCallback`** - —ç—Ç–æ —Ö—É–∫ React, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞–º–∏.

<!-- 0001.part.md -->

```js
const cachedFn = useCallback(fn, dependencies);
```

## –û–ø–∏—Å–∞–Ω–∏–µ

### `useCallback(fn, dependencies)`

–í—ã–∑–æ–≤–∏—Ç–µ `useCallback` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞–º–∏:

<!-- 0003.part.md -->

```js
import { useCallback } from 'react';

export default function ProductPage({
    productId,
    referrer,
    theme,
}) {
    const handleSubmit = useCallback(
        (orderDetails) => {
            post('/product/' + productId + '/buy', {
                referrer,
                orderDetails,
            });
        },
        [productId, referrer]
    );
    // ...
}
```

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

-   `fn`: –ó–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å. –û–Ω–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. React –≤–µ—Ä–Ω–µ—Ç (–Ω–µ –≤—ã–∑–æ–≤–µ—Ç!) –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React –≤–µ—Ä–Ω–µ—Ç –≤–∞–º —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ `–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –æ–Ω –æ—Ç–¥–∞—Å—Ç –≤–∞–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –≤–æ –≤—Ä–µ–º—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ–µ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –ø–æ–∑–∂–µ. React –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é. –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–∞–º, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Ä–µ—à–∏—Ç—å, –∫–æ–≥–¥–∞ –∏ —Å—Ç–æ–∏—Ç –ª–∏ –µ–µ –≤—ã–∑—ã–≤–∞—Ç—å.

-   `dependencies`: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –∫–æ–¥ `fn`. –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∫–ª—é—á–∞—é—Ç —Ä–µ–∫–≤–∏–∑–∏—Ç—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ç–µ–ª–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ï—Å–ª–∏ –≤–∞—à –ª–∏–Ω—Ç–µ—Ä [–Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ React](../learn/editor-setup.md), –æ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ –∫–∞–∂–¥–æ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω inline –ø–æ —Ç–∏–ø—É `[dep1, dep2, dep3]`. React –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞–∂–¥—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, –∏—Å–ø–æ–ª—å–∑—É—è –∞–ª–≥–æ—Ä–∏—Ç–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è [`Object.is`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/is).

#### –í–æ–∑–≤—Ä–∞—Ç—ã

–ü—Ä–∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ `useCallback` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏—é `fn`.

–ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö –æ–Ω–∞ –ª–∏–±–æ –≤–µ—Ä–Ω–µ—Ç —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `fn` –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (–µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å), –ª–∏–±–æ –≤–µ—Ä–Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `fn`, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –≤–æ –≤—Ä–µ–º—è —ç—Ç–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

-   `useCallback` - —ç—Ç–æ —Ö—É–∫, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ —Ç–æ–ª—å–∫–æ **–Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** –∏–ª–∏ –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤ –∏–ª–∏ —É—Å–ª–æ–≤–∏–π. –ï—Å–ª–∏ –≤–∞–º —ç—Ç–æ –Ω—É–∂–Ω–æ, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –Ω–µ–≥–æ.
-   React **–Ω–µ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–µ—Ç –æ—Å–æ–±–æ–π –ø—Ä–∏—á–∏–Ω—ã.** –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ React –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫—ç—à, –∫–æ–≥–¥–∞ –≤—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç–µ —Ñ–∞–π–ª –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ö–∞–∫ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, —Ç–∞–∫ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, React –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∫—ç—à, –µ—Å–ª–∏ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –í –±—É–¥—É—â–µ–º React –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è –∫—ç—à–∞ - –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ React –≤ –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤, —Ç–æ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–º—ã—Å–ª –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å –∫—ç—à –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç—Å—è –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—à–∏–º –æ–∂–∏–¥–∞–Ω–∏—è–º, –µ—Å–ª–∏ –≤—ã –ø–æ–ª–∞–≥–∞–µ—Ç–µ—Å—å –Ω–∞ `useCallback` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å [state variable](useState.md) –∏–ª–∏ [ref](useRef.md).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–ü—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏–Ω–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –≤ –∫–æ–º–∞–Ω–¥—É

<!-- 0005.part.md -->

–ß—Ç–æ–±—ã –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –æ–±–µ—Ä–Ω–∏—Ç–µ –µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ —Ö—É–∫ `useCallback`:

<!-- 0006.part.md -->

```js
import { useCallback } from 'react';

function ProductPage({ productId, referrer, theme }) {
    const handleSubmit = useCallback(
        (orderDetails) => {
            post('/product/' + productId + '/buy', {
                referrer,
                orderDetails,
            });
        },
        [productId, referrer]
    );
    // ...
}
```

<!-- 0007.part.md -->

–í–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥–≤–µ –≤–µ—â–∏ –≤ `useCallback`:

1.  –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏.
2.  –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≤–∫–ª—é—á–∞—é—â–∏–π –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≤–∞—à–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏.

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç `useCallback`, –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏.

–ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–Ω–¥–µ—Ä–∞—Ö React –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –≤–æ –≤—Ä–µ–º—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å (–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å [`Object.is`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/is)), `useCallback` –≤–µ—Ä–Ω–µ—Ç —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ –∏ —Ä–∞–Ω—å—à–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, `useCallback` –≤–µ—Ä–Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –Ω–∞ _—ç—Ç–æ–º_ —Ä–µ–Ω–¥–µ—Ä–µ.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, `useCallback` –∫—ç—à–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –ø–æ–∫–∞ –µ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è.

**–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–æ–≥–¥–∞ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ.**

–°–∫–∞–∂–µ–º, –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `handleSubmit` –æ—Ç `ProductPage` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É `ShippingForm`:

<!-- 0008.part.md -->

```js
function ProductPage({ productId, referrer, theme }) {
    // ...
    return (
        <div className={theme}>
            <ShippingForm onSubmit={handleSubmit} />
        </div>
    );
    // ...
}
```

<!-- 0009.part.md -->

–í—ã –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `theme` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–∏–µ –∑–∞–º–∏—Ä–∞–µ—Ç, –Ω–æ –µ—Å–ª–∏ —É–±—Ä–∞—Ç—å `<ShippingForm />` –∏–∑ JSX, —Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ. –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm`.

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, React —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –≤—Å–µ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.** –í–æ—Ç –ø–æ—á–µ–º—É, –∫–æ–≥–¥–∞ `ProductPage` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –¥—Ä—É–≥–æ–π `—Ç–µ–º–æ–π`, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` _—Ç–∞–∫–∂–µ_ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è. –≠—Ç–æ —Ö–æ—Ä–æ—à–æ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –ù–æ –µ—Å–ª–∏ –≤—ã —É–±–µ–¥–∏–ª–∏—Å—å, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–µ–¥–ª–µ–Ω–Ω—ã–π, –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å `ShippingForm` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –∫–æ–≥–¥–∞ –µ–≥–æ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã —Ç–∞–∫–∏–µ –∂–µ, –∫–∞–∫ –∏ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ä–µ–Ω–¥–µ—Ä–µ, –æ–±–µ—Ä–Ω—É–≤ –µ–≥–æ –≤ [`memo`:](memo.md)

<!-- 0010.part.md -->

```js
import { memo } from 'react';

const ShippingForm = memo(function ShippingForm({
    onSubmit,
}) {
    // ...
});
```

<!-- 0011.part.md -->

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è `ShippingForm` –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –µ—Å–ª–∏ –≤—Å–µ –µ–≥–æ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã _—Ç–µ –∂–µ_, —á—Ç–æ –∏ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ.** –í–æ—Ç –∫–æ–≥–¥–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∞–∂–Ω—ã–º! –î–æ–ø—É—Å—Ç–∏–º, –≤—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ `handleSubmit` –±–µ–∑ `useCallback`:

<!-- 0012.part.md -->

```js
function ProductPage({ productId, referrer, theme }) {
    // Every time the theme changes, this will be a different function...
    function handleSubmit(orderDetails) {
        post('/product/' + productId + '/buy', {
            referrer,
            orderDetails,
        });
    }

    return (
        <div className={theme}>
            {/* ... so ShippingForm's props will never be the same,
			and it will re-render every time */}
            <ShippingForm onSubmit={handleSubmit} />
        </div>
    );
}
```

<!-- 0013.part.md -->

**–í JavaScript `—Ñ—É–Ω–∫—Ü–∏—è () {}` –∏–ª–∏ `() => {}` –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç _—Ä–∞–∑–Ω—É—é_ —Ñ—É–Ω–∫—Ü–∏—é,** –ø–æ–¥–æ–±–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –æ–±—ä–µ–∫—Ç–Ω—ã–π –ª–∏—Ç–µ—Ä–∞–ª `{}` –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç. –û–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π, –Ω–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ä–µ–∫–≤–∏–∑–∏—Ç `ShippingForm` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º, –∏ –≤–∞—à–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è [`memo`](memo.md) –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –í–æ—Ç –∑–¥–µ—Å—å-—Ç–æ –∏ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è `useCallback`:

<!-- 0014.part.md -->

```js
function ProductPage({ productId, referrer, theme }) {
    // Tell React to cache your function between re-renders...
    const handleSubmit = useCallback(
        (orderDetails) => {
            post('/product/' + productId + '/buy', {
                referrer,
                orderDetails,
            });
        },
        [productId, referrer]
    ); // ...so as long as these dependencies don't change...

    return (
        <div className={theme}>
            {/* ...ShippingForm will receive
			the same props and can skip re-rendering */}
            <ShippingForm onSubmit={handleSubmit} />
        </div>
    );
}
```

<!-- 0015.part.md -->

**–í–µ—Ä–Ω—É–≤ `handleSubmit` –≤ `useCallback`, –≤—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ –±—É–¥–µ—Ç _–æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ_ —Ñ—É–Ω–∫—Ü–∏—è –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∞–º–∏** (–ø–æ–∫–∞ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏). –í—ã –Ω–µ –æ–±—è–∑–∞–Ω—ã _–æ–±–µ—Ä—Ç—ã–≤–∞—Ç—å_ —Ñ—É–Ω–∫—Ü–∏—é –≤ `useCallback`, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –≤—ã –Ω–µ –¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –µ–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –æ–±–µ—Ä–Ω—É—Ç–æ–º—É –≤ [`memo`](memo.md), –∏ —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–º—É –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥. –ï—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –≤–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è `useCallback`, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å–∞–Ω—ã –¥–∞–ª–µ–µ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

!!!note ""

    **–í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ `useCallback` —Ç–æ–ª—å–∫–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.** –ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –Ω–µ–≥–æ, –Ω–∞–π–¥–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –∏ —Å–Ω–∞—á–∞–ª–∞ —É—Å—Ç—Ä–∞–Ω–∏—Ç–µ –µ–µ. –ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å `useCallback` –æ–±—Ä–∞—Ç–Ω–æ.

!!!note "–ö–∞–∫ useCallback —Å–≤—è–∑–∞–Ω —Å useMemo?"

    –í—ã —á–∞—Å—Ç–æ –±—É–¥–µ—Ç–µ –≤–∏–¥–µ—Ç—å [`useMemo`](useMemo.md) –≤–º–µ—Å—Ç–µ —Å `useCallback`. –û–Ω–∏ –æ–±–∞ –ø–æ–ª–µ–∑–Ω—ã, –∫–æ–≥–¥–∞ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º [memoize](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%BC%D0%BE%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F) (–∏–ª–∏, –¥—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å) —Ç–æ, —á—Ç–æ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –≤–Ω–∏–∑:

    ```js
    import { useMemo, useCallback } from 'react';

    function ProductPage({ productId, referrer }) {
    	const product = useData('/product/' + productId);

    	const requirements = useMemo(() => {
    		// Calls your function and caches its result
    		return computeRequirements(product);
    	}, [product]);

    	const handleSubmit = useCallback(
    		(orderDetails) => {
    			// Caches your function itself
    			post('/product/' + productId + '/buy', {
    				referrer,
    				orderDetails,
    			});
    		},
    		[productId, referrer]
    	);

    	return (
    		<div className={theme}>
    			<ShippingForm
    				requirements={requirements}
    				onSubmit={handleSubmit}
    			/>
    		</div>
    	);
    }
    ```

    –†–∞–∑–Ω–∏—Ü–∞ –≤ —Ç–æ–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å:

    -   **[`useMemo`](useMemo.md) –∫—ç—à–∏—Ä—É–µ—Ç _—Ä–µ–∑—É–ª—å—Ç–∞—Ç_ –≤—ã–∑–æ–≤–∞ –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏.** –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ–Ω –∫—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ `computeRequirements(product)`, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –µ—Å–ª–∏ `product` –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç `requirements` –≤–Ω–∏–∑ –±–µ–∑ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ `ShippingForm`. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ React –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏—é –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
    -   **`useCallback` –∫—ç—à–∏—Ä—É–µ—Ç _—Å–∞–º—É —Ñ—É–Ω–∫—Ü–∏—é._** –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `useMemo`, –æ–Ω –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏—é. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∞ –∫—ç—à–∏—Ä—É–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏—é, —Ç–∞–∫ —á—Ç–æ `handleSubmit` _—Å–∞–º–∞ –ø–æ —Å–µ–±–µ_ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ `productId` –∏–ª–∏ `referrer` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `handleSubmit` –≤–Ω–∏–∑ –±–µ–∑ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ `ShippingForm`. –í–∞—à –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ñ–æ—Ä–º—É.

    –ï—Å–ª–∏ –≤—ã —É–∂–µ –∑–Ω–∞–∫–æ–º—ã —Å [`useMemo`](useMemo.md), –≤–∞–º –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å `useCallback` —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    ```js
    // Simplified implementation (inside React)
    function useCallback(fn, dependencies) {
    	return useMemo(() => fn, dependencies);
    }
    ```

    [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ä–∞–∑–Ω–∏—Ü–µ –º–µ–∂–¥—É `useMemo` –∏ `useCallback`.](useMemo.md)

!!!note "–î–æ–ª–∂–Ω—ã –ª–∏ –≤—ã –≤–µ–∑–¥–µ –¥–æ–±–∞–≤–ª—è—Ç—å useCallback?"

    –ï—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —ç—Ç–æ—Ç —Å–∞–π—Ç, –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —è–≤–ª—è—é—Ç—Å—è –≥—Ä—É–±—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–º–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ —Ü–µ–ª–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞), –º–µ–º–æ–∏–∑–∞—Ü–∏—è –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–∞. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –µ—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–∏—Å—É–Ω–∫–æ–≤, –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —è–≤–ª—è—é—Ç—Å—è –≥—Ä–∞–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä), —Ç–æ –º–µ–º–æ–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–π.

    –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å `useCallback` –ø–æ–ª–µ–∑–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–ª—É—á–∞—è—Ö:

    -   –í—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –µ–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É, –æ–±–µ—Ä–Ω—É—Ç–æ–º—É –≤ [`memo`](memo.md). –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
    -   –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ, –ø–æ–∑–∂–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–∞–∫–æ–≥–æ-—Ç–æ Hook. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥—Ä—É–≥–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –æ–±–µ—Ä–Ω—É—Ç–∞—è –≤ `useCallback`, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ–µ, –∏–ª–∏ –≤—ã –∑–∞–≤–∏—Å–∏—Ç–µ –æ—Ç —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ [`useEffect`](useEffect.md).

    –í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –ø–æ–ª—å–∑—ã –æ—Ç –æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `useCallback`. –í—Ä–µ–¥–∞ –æ—Ç —ç—Ç–æ–≥–æ —Ç–æ–∂–µ –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç –Ω–µ –¥—É–º–∞—Ç—å –æ–± –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –∏ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∫–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–µ –≤—Å—è –º–µ–º–æ–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞: –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ "–≤—Å–µ–≥–¥–∞ –Ω–æ–≤–æ–µ", –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã —Å–ª–æ–º–∞—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

    –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `useCallback` –Ω–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç _—Å–æ–∑–¥–∞–Ω–∏–µ_ —Ñ—É–Ω–∫—Ü–∏–∏. –í—ã –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é (–∏ —ç—Ç–æ fine!), –Ω–æ React –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å.

    **–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–Ω—É–∂–Ω–æ–π –º–µ–º–æ–∏–∑–∞—Ü–∏—é, —Å–ª–µ–¥—É—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:**.

    1.  –ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø—É—Å—Ç—å –æ–Ω [–ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSX –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](../learn/passing-props-to-a-component.md) –¢–æ–≥–¥–∞, –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-–æ–±–µ—Ä—Ç–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, React –∑–Ω–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å.
    2.  –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ [–ø–æ–¥–Ω–∏–º–∞–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–≤–µ—Ä—Ö](../learn/sharing-state-between-components.md) –¥–∞–ª—å—à–µ, —á–µ–º —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ —Ñ–æ—Ä–º—ã –∏ —Ç–æ, –Ω–∞–≤–µ–¥–µ–Ω –ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ –≤–µ—Ä—à–∏–Ω—É –≤–∞—à–µ–≥–æ –¥–µ—Ä–µ–≤–∞ –∏–ª–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π.
    3.  –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —á–∏—Å—Ç–æ—Ç—É [–ª–æ–≥–∏–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞](../learn/keeping-components-pure.md) –ï—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–º–µ—Ç–Ω—ã–º –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º, —ç—Ç–æ –æ—à–∏–±–∫–∞ –≤ –≤–∞—à–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ! –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–ª—è—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é.
    4.  –ò–∑–±–µ–≥–∞–π—Ç–µ [–Ω–µ–Ω—É–∂–Ω—ã—Ö –≠—Ñ—Ñ–µ–∫—Ç–æ–≤, –æ–±–Ω–æ–≤–ª—è—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ](../learn/you-might-not-need-an-effect.md) –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö React –≤—ã–∑–≤–∞–Ω—ã —Ü–µ–ø–æ—á–∫–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∏—Å—Ö–æ–¥—è—â–∏—Ö –æ—Ç –≠—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞.
    5.  –ü–æ–ø—Ä–æ–±—É–π—Ç–µ [—É–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –≤–∞—à–∏—Ö –≠—Ñ—Ñ–µ–∫—Ç–æ–≤](../learn/removing-effect-dependencies.md). –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç–æ –ø—Ä–æ—â–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –≤–Ω—É—Ç—Ä—å –≠—Ñ—Ñ–µ–∫—Ç–∞ –∏–ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

    –ï—Å–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—Å–µ –µ—â–µ –∫–∞–∂–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º, [–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ React Developer Tools](https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html), —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç –æ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏, –∏ –¥–æ–±–∞–≤—å—Ç–µ –º–µ–º–æ–∏–∑–∞—Ü–∏—é —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ. –≠—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ–±–ª–µ–≥—á–∞—é—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É —Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–º –ø–æ–ª–µ–∑–Ω–æ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ. –í –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ –º—ã –∏—Å—Å–ª–µ–¥—É–µ–º [–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–µ–º–æ–∏–∑–∞—Ü–∏–∏](https://www.youtube.com/watch?v=lGEMwh32soc), —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Ä–∞–∑ –∏ –Ω–∞–≤—Å–µ–≥–¥–∞.

<!-- 0020.part.md -->

### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É useCallback –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é

#### 1. –ü—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å `useCallback` –∏ `memo`

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` **–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω**, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É.

–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∫–∞–∂–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π `ShippingForm` –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å—Å—è. –≠—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è, –∏ –≤–∞–º –Ω—É–∂–Ω–æ –æ—Ç—Ä–∞–∑–∏—Ç—å –Ω–æ–≤—ã–π –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ.

–î–∞–ª–µ–µ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É. **–ë–ª–∞–≥–æ–¥–∞—Ä—è `useCallback` –≤–º–µ—Å—Ç–µ —Å [`memo`](memo.md), —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ!** `ShippingForm` –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `handleSubmit` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å. –§—É–Ω–∫—Ü–∏—è `handleSubmit` –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å, –ø–æ—Ç–æ–º—É —á—Ç–æ `productId` –∏ `referrer` (–≤–∞—à–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `useCallback`) –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

=== "App.js"

    ```js
    import { useState } from 'react';
    import ProductPage from './ProductPage.js';

    export default function App() {
    	const [isDark, setIsDark] = useState(false);
    	return (
    		<>
    			<label>
    				<input
    					type="checkbox"
    					checked={isDark}
    					onChange={(e) =>
    						setIsDark(e.target.checked)
    					}
    				/>
    				Dark mode
    			</label>
    			<hr />
    			<ProductPage
    				referrerId="wizard_of_oz"
    				productId={123}
    				theme={isDark ? 'dark' : 'light'}
    			/>
    		</>
    	);
    }
    ```

=== "ProductPage.js"

    ```js
    import { useCallback } from 'react';
    import ShippingForm from './ShippingForm.js';

    export default function ProductPage({
    	productId,
    	referrer,
    	theme,
    }) {
    	const handleSubmit = useCallback(
    		(orderDetails) => {
    			post('/product/' + productId + '/buy', {
    				referrer,
    				orderDetails,
    			});
    		},
    		[productId, referrer]
    	);

    	return (
    		<div className={theme}>
    			<ShippingForm onSubmit={handleSubmit} />
    		</div>
    	);
    }

    function post(url, data) {
    	// Imagine this sends a request...
    	console.log('POST /' + url);
    	console.log(data);
    }
    ```

=== "ShippingForm.js"

    ```js
    import { memo, useState } from 'react';

    const ShippingForm = memo(function ShippingForm({
    	onSubmit,
    }) {
    	const [count, setCount] = useState(1);

    	console.log(
    		'[ARTIFICIALLY SLOW] Rendering <ShippingForm />'
    	);
    	let startTime = performance.now();
    	while (performance.now() - startTime < 500) {
    		// Do nothing for 500 ms to emulate extremely slow code
    	}

    	function handleSubmit(e) {
    		e.preventDefault();
    		const formData = new FormData(e.target);
    		const orderDetails = {
    			...Object.fromEntries(formData),
    			count,
    		};
    		onSubmit(orderDetails);
    	}

    	return (
    		<form onSubmit={handleSubmit}>
    			<p>
    				<b>
    					Note: <code>ShippingForm</code> is
    					artificially slowed down!
    				</b>
    			</p>
    			<label>
    				Number of items:
    				<button
    					type="button"
    					onClick={() => setCount(count - 1)}
    				>
    					‚Äì
    				</button>
    				{count}
    				<button
    					type="button"
    					onClick={() => setCount(count + 1)}
    				>
    					+
    				</button>
    			</label>
    			<label>
    				Street:
    				<input name="street" />
    			</label>
    			<label>
    				City:
    				<input name="city" />
    			</label>
    			<label>
    				Postal code:
    				<input name="zipCode" />
    			</label>
    			<button type="submit">Submit</button>
    		</form>
    	);
    });

    export default ShippingForm;
    ```

#### 2. –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `ShippingForm` —Ç–∞–∫–∂–µ **–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–µ–Ω–∞**, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç–µ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–µ–¥–ª–µ–Ω–Ω–æ! –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ **–≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ—Ç –≤—ã–∑–æ–≤–∞ `useCallback`,** –ø–æ—ç—Ç–æ–º—É `handleSubmit` –≤—Å–µ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π, –∏ –∑–∞–º–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ShippingForm` –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥.

=== "App.js"

    ```js
    import { useState } from 'react';
    import ProductPage from './ProductPage.js';

    export default function App() {
    	const [isDark, setIsDark] = useState(false);
    	return (
    		<>
    			<label>
    				<input
    					type="checkbox"
    					checked={isDark}
    					onChange={(e) =>
    						setIsDark(e.target.checked)
    					}
    				/>
    				Dark mode
    			</label>
    			<hr />
    			<ProductPage
    				referrerId="wizard_of_oz"
    				productId={123}
    				theme={isDark ? 'dark' : 'light'}
    			/>
    		</>
    	);
    }
    ```

=== "ProductPage.js"

    ```js
    import ShippingForm from './ShippingForm.js';

    export default function ProductPage({
    	productId,
    	referrer,
    	theme,
    }) {
    	function handleSubmit(orderDetails) {
    		post('/product/' + productId + '/buy', {
    			referrer,
    			orderDetails,
    		});
    	}

    	return (
    		<div className={theme}>
    			<ShippingForm onSubmit={handleSubmit} />
    		</div>
    	);
    }

    function post(url, data) {
    	// Imagine this sends a request...
    	console.log('POST /' + url);
    	console.log(data);
    }
    ```

=== "ShippingForm.js"

    ```js
    import { memo, useState } from 'react';

    const ShippingForm = memo(function ShippingForm({
    	onSubmit,
    }) {
    	const [count, setCount] = useState(1);

    	console.log(
    		'[ARTIFICIALLY SLOW] Rendering <ShippingForm />'
    	);
    	let startTime = performance.now();
    	while (performance.now() - startTime < 500) {
    		// Do nothing for 500 ms to emulate extremely slow code
    	}

    	function handleSubmit(e) {
    		e.preventDefault();
    		const formData = new FormData(e.target);
    		const orderDetails = {
    			...Object.fromEntries(formData),
    			count,
    		};
    		onSubmit(orderDetails);
    	}

    	return (
    		<form onSubmit={handleSubmit}>
    			<p>
    				<b>
    					Note: <code>ShippingForm</code> is
    					artificially slowed down!
    				</b>
    			</p>
    			<label>
    				Number of items:
    				<button
    					type="button"
    					onClick={() => setCount(count - 1)}
    				>
    					‚Äì
    				</button>
    				{count}
    				<button
    					type="button"
    					onClick={() => setCount(count + 1)}
    				>
    					+
    				</button>
    			</label>
    			<label>
    				Street:
    				<input name="street" />
    			</label>
    			<label>
    				City:
    				<input name="city" />
    			</label>
    			<label>
    				Postal code:
    				<input name="zipCode" />
    			</label>
    			<button type="submit">Submit</button>
    		</form>
    	);
    });

    export default ShippingForm;
    ```

–û–¥–Ω–∞–∫–æ, –≤–æ—Ç —Ç–æ—Ç –∂–µ –∫–æ–¥ **—Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º.** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `useCallback` –æ—â—É—â–∞–µ—Ç—Å—è –∑–∞–º–µ—Ç–Ω–æ –∏–ª–∏ –Ω–µ—Ç?

=== "App.js"

    ```js
    import { useState } from 'react';
    import ProductPage from './ProductPage.js';

    export default function App() {
    	const [isDark, setIsDark] = useState(false);
    	return (
    		<>
    			<label>
    				<input
    					type="checkbox"
    					checked={isDark}
    					onChange={(e) =>
    						setIsDark(e.target.checked)
    					}
    				/>
    				Dark mode
    			</label>
    			<hr />
    			<ProductPage
    				referrerId="wizard_of_oz"
    				productId={123}
    				theme={isDark ? 'dark' : 'light'}
    			/>
    		</>
    	);
    }
    ```

=== "ProductPage.js"

    ```js
    import ShippingForm from './ShippingForm.js';

    export default function ProductPage({
    	productId,
    	referrer,
    	theme,
    }) {
    	function handleSubmit(orderDetails) {
    		post('/product/' + productId + '/buy', {
    			referrer,
    			orderDetails,
    		});
    	}

    	return (
    		<div className={theme}>
    			<ShippingForm onSubmit={handleSubmit} />
    		</div>
    	);
    }

    function post(url, data) {
    	// Imagine this sends a request...
    	console.log('POST /' + url);
    	console.log(data);
    }
    ```

=== "ShippingForm.js"

    ```js
    import { memo, useState } from 'react';

    const ShippingForm = memo(function ShippingForm({
    	onSubmit,
    }) {
    	const [count, setCount] = useState(1);

    	console.log('Rendering <ShippingForm />');

    	function handleSubmit(e) {
    		e.preventDefault();
    		const formData = new FormData(e.target);
    		const orderDetails = {
    			...Object.fromEntries(formData),
    			count,
    		};
    		onSubmit(orderDetails);
    	}

    	return (
    		<form onSubmit={handleSubmit}>
    			<label>
    				Number of items:
    				<button
    					type="button"
    					onClick={() => setCount(count - 1)}
    				>
    					‚Äì
    				</button>
    				{count}
    				<button
    					type="button"
    					onClick={() => setCount(count + 1)}
    				>
    					+
    				</button>
    			</label>
    			<label>
    				Street:
    				<input name="street" />
    			</label>
    			<label>
    				City:
    				<input name="city" />
    			</label>
    			<label>
    				Postal code:
    				<input name="zipCode" />
    			</label>
    			<button type="submit">Submit</button>
    		</form>
    	);
    });

    export default ShippingForm;
    ```

–î–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –∫–æ–¥ –±–µ–∑ –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –≤–∞—à–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä—ã–µ, –º–µ–º–æ–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞.

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å React –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ, –æ—Ç–∫–ª—é—á–∏—Ç—å [React Developer Tools](../learn/react-developer-tools.md) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞

–ò–Ω–æ–≥–¥–∞ –≤–∞–º –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞.

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleAddTodo` —É–∫–∞–∑—ã–≤–∞–µ—Ç `todos` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π todos –∏–∑ –Ω–µ–≥–æ:

<!-- 0045.part.md -->

```js
function TodoList() {
    const [todos, setTodos] = useState([]);

    const handleAddTodo = useCallback(
        (text) => {
            const newTodo = { id: nextId++, text };
            setTodos([...todos, newTodo]);
        },
        [todos]
    );
    // ...
}
```

<!-- 0046.part.md -->

–û–±—ã—á–Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ–ª–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ö–æ–≥–¥–∞ –≤—ã —á–∏—Ç–∞–µ—Ç–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å —ç—Ç—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –ø–µ—Ä–µ–¥–∞–≤ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é [updater](useState.md):

<!-- 0047.part.md -->

```js
function TodoList() {
    const [todos, setTodos] = useState([]);

    const handleAddTodo = useCallback((text) => {
        const newTodo = { id: nextId++, text };
        setTodos((todos) => [...todos, newTodo]);
    }, []); // ‚úÖ No need for the todos dependency
    // ...
}
```

<!-- 0048.part.md -->

–ó–¥–µ—Å—å –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å `todos` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –∏ —á–∏—Ç–∞—Ç—å –µ–µ –≤–Ω—É—Ç—Ä–∏, –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –≤ React –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –æ —Ç–æ–º, _–∫–∞–∫_ –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`todos => [...todos, newTodo]`). [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](useState.md)

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞

–ò–Ω–æ–≥–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤–Ω—É—Ç—Ä–∏ [Effect:](../learn/synchronizing-with-effects.md)

<!-- 0049.part.md -->

```js
function ChatRoom({ roomId }) {
    const [message, setMessage] = useState('');

    function createOptions() {
        return {
            serverUrl: 'https://localhost:1234',
            roomId: roomId,
        };
    }

    useEffect(() => {
        const options = createOptions();
        const connection = createConnection();
        connection.connect();
        // ...
    });
}
```

<!-- 0050.part.md -->

–≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É. [–ö–∞–∂–¥–æ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –≤–∞—à–µ–≥–æ –≠—Ñ—Ñ–µ–∫—Ç–∞](../learn/lifecycle-of-reactive-effects.md) –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤—ã –æ–±—ä—è–≤–∏—Ç–µ `createOptions` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –≤–∞—à –≠—Ñ—Ñ–µ–∫—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —á–∞—Ç—É:

<!-- 0051.part.md -->

```js
useEffect(() => {
    const options = createOptions();
    const connection = createConnection();
    connection.connect();
    return () => connection.disconnect();
}, [createOptions]); // üî¥ Problem: This dependency changes on every render
// ...
```

<!-- 0052.part.md -->

–ß—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ Effect, –≤ `useCallback`:

<!-- 0053.part.md -->

```js
function ChatRoom({ roomId }) {
    const [message, setMessage] = useState('');

    const createOptions = useCallback(() => {
        return {
            serverUrl: 'https://localhost:1234',
            roomId: roomId,
        };
    }, [roomId]); // ‚úÖ Only changes when roomId changes

    useEffect(() => {
        const options = createOptions();
        const connection = createConnection();
        connection.connect();
        return () => connection.disconnect();
    }, [createOptions]); // ‚úÖ Only changes when createOptions changes
    // ...
}
```

<!-- 0054.part.md -->

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `createOptions` –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –º–µ–∂–¥—É –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞–º–∏, –µ—Å–ª–∏ `roomId` –æ–¥–∏–Ω–∞–∫–æ–≤. **–û–¥–Ω–∞–∫–æ, –µ—â–µ –ª—É—á—à–µ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏.** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é _–≤–Ω—É—Ç—Ä—å_ Effect:

<!-- 0055.part.md -->

```js
function ChatRoom({ roomId }) {
    const [message, setMessage] = useState('');

    useEffect(() => {
        function createOptions() {
            // ‚úÖ No need for useCallback or function dependencies!
            return {
                serverUrl: 'https://localhost:1234',
                roomId: roomId,
            };
        }

        const options = createOptions();
        const connection = createConnection();
        connection.connect();
        return () => connection.disconnect();
    }, [roomId]); // ‚úÖ Only changes when roomId changes
    // ...
}
```

<!-- 0056.part.md -->

–¢–µ–ø–µ—Ä—å –≤–∞—à –∫–æ–¥ —Å—Ç–∞–ª –ø—Ä–æ—â–µ –∏ –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ `useCallback`. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.](../learn/removing-effect-dependencies.md)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ö—É–∫–∞

–ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ö—É–∫](../learn/reusing-logic-with-custom-hooks.md), —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–µ—Ä–Ω—É—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç, –≤ `useCallback`:

<!-- 0057.part.md -->

```js
function useRouter() {
    const { dispatch } = useContext(RouterStateContext);

    const navigate = useCallback(
        (url) => {
            dispatch({ type: 'navigate', url });
        },
        [dispatch]
    );

    const goBack = useCallback(() => {
        dispatch({ type: 'back' });
    }, [dispatch]);

    return {
        navigate,
        goBack,
    };
}
```

<!-- 0058.part.md -->

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –≤–∞—à–µ–≥–æ Hook —Å–º–æ–≥—É—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–¥.

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –º–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, `useCallback` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É–∫–∞–∑–∞–ª–∏ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞!

–ï—Å–ª–∏ –≤—ã –∑–∞–±—É–¥–µ—Ç–µ –ø—Ä–æ –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, `useCallback` –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é:

<!-- 0059.part.md -->

```js
function ProductPage({ productId, referrer }) {
    const handleSubmit = useCallback((orderDetails) => {
        post('/product/' + productId + '/buy', {
            referrer,
            orderDetails,
        });
    }); // üî¥ Returns a new function every time: no dependency array
    // ...
}
```

<!-- 0060.part.md -->

–≠—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è, –ø–µ—Ä–µ–¥–∞—é—â–∞—è –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

<!-- 0061.part.md -->

```js
function ProductPage({ productId, referrer }) {
  const handleSubmit = useCallback((orderDetails) => {
    post('/product/' + productId + '/buy', {
      referrer,
      orderDetails,
    });
  }, [productId, referrer]); // ‚úÖ Does not return a new function unnecessarily
  // ...
```

<!-- 0062.part.md -->

–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ, —Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –æ–¥–Ω–∞ –∏–∑ –≤–∞—à–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ª–∞–¥–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –≤—Ä—É—á–Ω—É—é –∑–∞–ø–∏—Å–∞–≤ –ª–æ–≥–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–Ω—Å–æ–ª—å:

<!-- 0063.part.md -->

```js
const handleSubmit = useCallback(
    (orderDetails) => {
        // ..
    },
    [productId, referrer]
);

console.log([productId, referrer]);
```

<!-- 0064.part.md -->

–ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ —â–µ–ª–∫–Ω—É—Ç—å –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ –º–∞—Å—Å–∏–≤–∞—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—ã–±—Ä–∞—Ç—å "Store as a global variable" –¥–ª—è –æ–±–æ–∏—Ö. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–≤, —á—Ç–æ –ø–µ—Ä–≤—ã–π –º–∞—Å—Å–∏–≤ –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ `temp1`, –∞ –≤—Ç–æ—Ä–æ–π - –∫–∞–∫ `temp2`, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–∞–∂–¥–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ –æ–±–æ–∏—Ö –º–∞—Å—Å–∏–≤–∞—Ö –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π:

<!-- 0065.part.md -->

```js
Object.is(temp1[0], temp2[0]); // Is the first dependency the same between the arrays?
Object.is(temp1[1], temp2[1]); // Is the second dependency the same between the arrays?
Object.is(temp1[2], temp2[2]); // ... and so on for every dependency ...
```

<!-- 0066.part.md -->

–ö–æ–≥–¥–∞ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ, –∫–∞–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–∞—Ä—É—à–∞–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏—é, –ª–∏–±–æ –Ω–∞–π–¥–∏—Ç–µ —Å–ø–æ—Å–æ–± —É–¥–∞–ª–∏—Ç—å –µ–µ, –ª–∏–±–æ [–º–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ –∏ –µ–µ](useMemo.md).

### –ú–Ω–µ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `useCallback` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ –≤ —Ü–∏–∫–ª–µ, –Ω–æ —ç—Ç–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Chart` –æ–±–µ—Ä–Ω—É—Ç –≤ [`memo`](memo.md). –í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ `Chart` –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `ReportList`. –û–¥–Ω–∞–∫–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å `useCallback` –≤ —Ü–∏–∫–ª–µ:

<!-- 0067.part.md -->

```js
function ReportList({ items }) {
    return (
        <article>
            {items.map((item) => {
                // üî¥ You can't call useCallback in a loop like this:
                const handleClick = useCallback(() => {
                    sendReport(item);
                }, [item]);

                return (
                    <figure key={item.id}>
                        <Chart onClick={handleClick} />
                    </figure>
                );
            })}
        </article>
    );
}
```

<!-- 0068.part.md -->

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏–∑–≤–ª–µ–∫–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ —Ç—É–¥–∞ `useCallback`:

<!-- 0069.part.md -->

```js
function ReportList({ items }) {
    return (
        <article>
            {items.map((item) => (
                <Report key={item.id} item={item} />
            ))}
        </article>
    );
}

function Report({ item }) {
    // ‚úÖ Call useCallback at the top level:
    const handleClick = useCallback(() => {
        sendReport(item);
    }, [item]);

    return (
        <figure>
            <Chart onClick={handleClick} />
        </figure>
    );
}
```

<!-- 0070.part.md -->

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å `useCallback` –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∏ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–±–µ—Ä–Ω—É—Ç—å —Å–∞–º `Report` –≤ [`memo`.](memo.md) –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `item` –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, `Report` –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –ø–æ—ç—Ç–æ–º—É `Chart` —Ç–æ–∂–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:

<!-- 0071.part.md -->

```js
function ReportList({ items }) {
    // ...
}

const Report = memo(function Report({ item }) {
    function handleClick() {
        sendReport(item);
    }

    return (
        <figure>
            <Chart onClick={handleClick} />
        </figure>
    );
});
```

## –°—Å—ã–ª–∫–∏

-   [https://react.dev/reference/react/useCallback](https://react.dev/reference/react/useCallback)
